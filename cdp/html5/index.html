<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Customer Data Platform 1.0</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */

article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block
}

audio, canvas, video {
    display: inline-block
}

audio:not([controls]) {
    display: none;
    height: 0
}

[hidden], template {
    display: none
}

script {
    display: none !important
}

html {
    font-family: sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%
}

a {
    background: transparent
}

a:focus {
    outline: thin dotted
}

a:active, a:hover {
    outline: 0
}

h1 {
    font-size: 2em;
    margin: .67em 0
}

abbr[title] {
    border-bottom: 1px dotted
}

b, strong {
    font-weight: bold
}

dfn {
    font-style: italic
}

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0
}

mark {
    background: #ff0;
    color: #000
}

code, kbd, pre, samp {
    font-family: monospace;
    font-size: 1em
}

pre {
    white-space: pre-wrap
}

q {
    quotes: "\201C" "\201D" "\2018" "\2019"
}

small {
    font-size: 80%
}

sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline
}

sup {
    top: -.5em
}

sub {
    bottom: -.25em
}

img {
    border: 0
}

svg:not(:root) {
    overflow: hidden
}

figure {
    margin: 0
}

fieldset {
    border: 1px solid silver;
    margin: 0 2px;
    padding: .35em .625em .75em
}

legend {
    border: 0;
    padding: 0
}

button, input, select, textarea {
    font-family: inherit;
    font-size: 100%;
    margin: 0
}

button, input {
    line-height: normal
}

button, select {
    text-transform: none
}

button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button;
    cursor: pointer
}

button[disabled], html input[disabled] {
    cursor: default
}

input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box;
    padding: 0
}

input[type="search"] {
    -webkit-appearance: textfield;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;
    box-sizing: content-box
}

input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none
}

button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0
}

textarea {
    overflow: auto;
    vertical-align: top
}

table {
    border-collapse: collapse;
    border-spacing: 0
}

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
}

html, body {
    font-size: 12pt
}

body {
    background: #fff;
    color: rgba(0, 0, 0, .8);
    padding: 0;
    margin: 0;
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
    tab-size: 4;
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased
}

a:hover {
    cursor: pointer
}

img, object, embed {
    max-width: 100%;
    height: auto
}

object, embed {
    height: 100%
}

img {
    -ms-interpolation-mode: bicubic
}

.left {
    float: left !important
}

.right {
    float: right !important
}

.text-left {
    text-align: left !important
}

.text-right {
    text-align: right !important
}

.text-center {
    text-align: center !important
}

.text-justify {
    text-align: justify !important
}

.hide {
    display: none
}

img, object, svg {
    display: inline-block;
    vertical-align: middle
}

textarea {
    height: auto;
    min-height: 50px
}

select {
    width: 100%
}

.center {
    margin-left: auto;
    margin-right: auto
}

.spread {
    width: 100%
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: 1.21875em;
    line-height: 1.6
}

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    line-height: 1.45;
    color: #446CAA;
    font-weight: 400;
    margin-top: 0;
    margin-bottom: .25em
}

div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    padding: 0;
    direction: ltr
}

a {
    color: #2156a5;
    text-decoration: underline;
    line-height: inherit
}

a:hover, a:focus {
    color: #1d4b8f
}

a img {
    border: none
}

p {
    font-family: inherit;
    font-weight: 400;
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility
}

p aside {
    font-size: .875em;
    line-height: 1.35;
    font-style: italic
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    font-weight: bold;
    font-style: normal;
    color: #446CAA;
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: .5em;
    line-height: 1.0125em
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: #e99b8f;
    line-height: 0
}

h1 {
    font-size: 2.125em
}

h2 {
    font-size: 1.6875em
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.375em
}

h4, h5 {
    font-size: 1.125em
}

h6 {
    font-size: 1em
}

hr {
    border: solid #ddddd8;
    border-width: 1px 0 0;
    clear: both;
    margin: 2.4em 0 1.5em;
    height: 0
}

em, i {
    font-style: italic;
    line-height: inherit
}

strong, b {
    font-weight: bold;
    line-height: inherit
}

small {
    font-size: 60%;
    line-height: inherit
}

code {
    font-family: "Courier New", monospace;
    font-weight: 400;
    color: rgba(0, 0, 0, .9)
}

ul, ol, dl {
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit
}

ul, ol, ul.no-bullet, ol.no-bullet {
    margin-left: 1.5em
}

ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
    font-size: 1em
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit
}

ul.square {
    list-style-type: square
}

ul.circle {
    list-style-type: circle
}

ul.disc {
    list-style-type: disc
}

ul.no-bullet {
    list-style: none
}

ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0
}

dl dt {
    margin-bottom: .3125em;
    font-weight: bold
}

dl dd {
    margin-bottom: 1.25em
}

abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: rgba(0, 0, 0, .8);
    border-bottom: 1px dotted #ddd;
    cursor: help
}

abbr {
    text-transform: none
}

blockquote {
    margin: 0 0 1.25em;
    padding: .5625em 1.25em 0 1.1875em;
    border-left: 1px solid #ddd
}

blockquote cite {
    display: block;
    font-size: .9375em;
    color: rgba(0, 0, 0, .6)
}

blockquote cite:before {
    content: "\2014 \0020"
}

blockquote cite a, blockquote cite a:visited {
    color: rgba(0, 0, 0, .6)
}

blockquote, blockquote p {
    line-height: 1.6;
    color: rgba(0, 0, 0, .85)
}

@media only screen and (min-width: 768px) {
    h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
        line-height: 1.2
    }

    h1 {
        font-size: 2em
    }

    h2 {
        font-size: 1.5em
    }

    h3, #toctitle, .sidebarblock > .content > .title {
        font-size: 1.2em
    }

    h4 {
        font-size: 1.0em
    }

    h5 {
        font-size: 0.8em
    }

    h6 {
        font-size: 0.8em
    }
}

table {
    background: #fff;
    margin-bottom: 1.25em;
    border: solid 1px #dedede
}

table thead, table tfoot {
    background: #f7f8f7;
    font-weight: bold
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: .5em .625em .625em;
    font-size: inherit;
    color: rgba(0, 0, 0, .8);
    text-align: left
}

table tr th, table tr td {
    padding: .5625em .625em;
    font-size: inherit;
    color: rgba(0, 0, 0, .8)
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: #f8f8f7
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.6
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    line-height: 1.2;
    word-spacing: -.05em
}

h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong {
    font-weight: 400
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table
}

.clearfix:after, .float-group:after {
    clear: both
}

*:not(pre) > code {
    font-size: .9375em;
    font-style: normal !important;
    letter-spacing: 0;
    padding: .1em .5ex;
    word-spacing: -.15em;
    background-color: #f7f7f8;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    line-height: 1.45;
    text-rendering: optimizeSpeed;
    word-wrap: break-word
}

*:not(pre) > code.nobreak {
    word-wrap: normal
}

*:not(pre) > code.nowrap {
    white-space: nowrap
}

pre, pre > code {
    line-height: 1.45;
    color: rgba(0, 0, 0, .9);
    font-family: "Courier New", monospace;
    font-weight: 400;
    text-rendering: optimizeSpeed
}

em em {
    font-style: normal
}

strong strong {
    font-weight: 400
}

.keyseq {
    color: rgba(51, 51, 51, .8)
}

kbd {
    font-family: "Courier New", monospace;
    display: inline-block;
    color: rgba(0, 0, 0, .8);
    font-size: .65em;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
    margin: 0 .15em;
    padding: .2em .5em;
    vertical-align: middle;
    position: relative;
    top: -.1em;
    white-space: nowrap
}

.keyseq kbd:first-child {
    margin-left: 0
}

.keyseq kbd:last-child {
    margin-right: 0
}

.menuseq, .menu {
    color: rgba(0, 0, 0, .8)
}

b.button:before, b.button:after {
    position: relative;
    top: -1px;
    font-weight: 400
}

b.button:before {
    content: "[";
    padding: 0 3px 0 2px
}

b.button:after {
    content: "]";
    padding: 0 2px 0 3px
}

p a > code:hover {
    color: rgba(0, 0, 0, .9)
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: .9375em;
    padding-right: .9375em
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both
}

#content {
    margin-top: 1.25em
}

#content:before {
    content: none
}

#header > h1:first-child {
    color: #446CAA;
    margin-top: 2rem;
    margin-bottom: 0
}

#header > h1:first-child + #toc {
    margin-top: 8px;
    border-top: 1px solid #ddddd8
}

#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) {
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px
}

#header .details {
    border-bottom: 1px solid #ddddd8;
    line-height: 1.45;
    padding-top: .25em;
    padding-bottom: .25em;
    padding-left: .25em;
    color: rgba(0, 0, 0, .6);
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -ms-flex-flow: row wrap;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap
}

#header .details span:first-child {
    margin-left: -.125em
}

#header .details span.email a {
    color: rgba(0, 0, 0, .85)
}

#header .details br {
    display: none
}

#header .details br + span:before {
    content: "\00a0\2013\00a0"
}

#header .details br + span.author:before {
    content: "\00a0\22c5\00a0";
    color: rgba(0, 0, 0, .85)
}

#header .details br + span#revremark:before {
    content: "\00a0|\00a0"
}

#header #revnumber {
    text-transform: capitalize
}

#header #revnumber:after {
    content: "\00a0"
}

#content > h1:first-child:not([class]) {
    color: rgba(0, 0, 0, .85);
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
    margin-top: 0;
    padding-top: 1rem;
    margin-bottom: 1.25rem
}

#toc {
    border-bottom: 1px solid #efefed;
    padding-bottom: .5em
}

#toc > ul {
    margin-left: .125em
}

#toc ul.sectlevel0 > li > a {
    font-style: italic
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin: .5em 0
}

#toc ul {
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    list-style-type: none
}

#toc li {
    line-height: 1.3334;
    margin-top: .3334em
}

#toc a {
    text-decoration: none
}

#toc a:active {
    text-decoration: underline
}

#toctitle {
    color: #446CAA;
    font-size: 1.2em
}

@media only screen and (min-width: 768px) {
    #toctitle {
        font-size: 1.375em
    }

    body.toc2 {
        padding-left: 15em;
        padding-right: 0
    }

    #toc.toc2 {
        margin-top: 0 !important;
        background-color: #f8f8f7;
        position: fixed;
        width: 15em;
        left: 0;
        top: 0;
        border-right: 1px solid #efefed;
        border-top-width: 0 !important;
        border-bottom-width: 0 !important;
        z-index: 1000;
        padding: 1.25em 1em;
        height: 100%;
        overflow: auto
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
        margin-bottom: .8rem;
        font-size: 1.2em
    }

    #toc.toc2 > ul {
        font-size: .9em;
        margin-bottom: 0
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1em
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: .5em;
        margin-bottom: .5em
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 15em
    }

    body.toc2.toc-right #toc.toc2 {
        border-right-width: 0;
        border-left: 1px solid #efefed;
        left: auto;
        right: 0
    }
}

@media only screen and (min-width: 1280px) {
    body.toc2 {
        padding-left: 20em;
        padding-right: 0
    }

    #toc.toc2 {
        width: 20em
    }

    #toc.toc2 #toctitle {
        font-size: 1.375em
    }

    #toc.toc2 > ul {
        font-size: .95em
    }

    #toc.toc2 ul ul {
        padding-left: 1.25em
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 20em
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

#content #toc > :first-child {
    margin-top: 0
}

#content #toc > :last-child {
    margin-bottom: 0
}

#footer {
    max-width: 100%;
    background-color: rgba(0, 0, 0, .8);
    padding: 1.25em
}

#footer-text {
    color: rgba(255, 255, 255, .8);
    line-height: 1.44
}

.sect1 {
    padding-bottom: .625em
}

@media only screen and (min-width: 768px) {
    .sect1 {
        padding-bottom: 1.25em
    }
}

.sect1 + .sect1 {
    border-top: 1px solid #ddddd8
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    z-index: 1001;
    width: 1.5ex;
    margin-left: -1.5ex;
    display: block;
    text-decoration: none !important;
    visibility: hidden;
    text-align: center;
    font-weight: 400
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: "\00A7";
    font-size: .85em;
    display: block;
    padding-top: .1em
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: #ba3925;
    text-decoration: none
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: #a53221
}

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock {
    margin-bottom: 1.25em
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-rendering: optimizeLegibility;
    text-align: left;
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    font-size: 1rem;
    font-style: italic;
    margin-tip: 1em
}

table.tableblock > caption.title {
    white-space: nowrap;
    overflow: visible;
    max-width: 0
}

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    color: rgba(0, 0, 0, .85)
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit
}

.admonitionblock > table {
    border-collapse: separate;
    border: 0;
    background: none;
    width: 100%
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 80px
}

.admonitionblock > table td.icon img {
    max-width: none
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    text-transform: uppercase
}

.admonitionblock > table td.content {
    padding-left: 1.125em;
    padding-right: 1.25em;
    border-left: 1px solid #ddddd8;
    color: rgba(0, 0, 0, .6)
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: #e6e6e6;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #fff;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.exampleblock > .content > :first-child {
    margin-top: 0
}

.exampleblock > .content > :last-child {
    margin-bottom: 0
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.sidebarblock > :first-child {
    margin-top: 0
}

.sidebarblock > :last-child {
    margin-bottom: 0
}

.sidebarblock > .content > .title {
    color: #7a2518;
    margin-top: 0;
    text-align: center
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
    background: #f7f7f8
}

.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint {
    background: #f2f1f1
}

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    -webkit-border-radius: 4px;
    border-radius: 4px;
    word-wrap: break-word;
    padding: 1em;
    font-size: .8125em
}

.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal
}

@media only screen and (min-width: 768px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: .90625em
    }
}

@media only screen and (min-width: 1280px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: 1em
    }
}

.literalblock.output pre {
    color: #f7f7f8;
    background-color: rgba(0, 0, 0, .9)
}

.listingblock pre.highlightjs {
    padding: 0
}

.listingblock pre.highlightjs > code {
    padding: 1em;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.listingblock pre.prettyprint {
    border-width: 0
}

.listingblock > .content {
    position: relative
}

.listingblock code[data-lang]:before {
    display: none;
    content: attr(data-lang);
    position: absolute;
    font-size: .75em;
    top: .425rem;
    right: .5rem;
    line-height: 1;
    text-transform: uppercase;
    color: #999
}

.listingblock:hover code[data-lang]:before {
    display: block
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: .5em;
    color: #999
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: "$"
}

table.pyhltable {
    border-collapse: separate;
    border: 0;
    margin-bottom: 0;
    background: none
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
    line-height: 1.45
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0
}

pre.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid #ddddd8
}

pre.pygments .lineno {
    display: inline-block;
    margin-right: .25em
}

table.pyhltable .linenodiv {
    background: none !important;
    padding-right: 0 !important
}

.quoteblock {
    margin: 0 1em 1.25em 1.5em;
    display: table
}

.quoteblock > .title {
    margin-left: -1.5em;
    margin-bottom: .75em
}

.quoteblock blockquote, .quoteblock blockquote p {
    color: rgba(0, 0, 0, .85);
    font-size: 1.15rem;
    line-height: 1.75;
    word-spacing: .1em;
    letter-spacing: 0;
    font-style: italic;
    text-align: justify
}

.quoteblock blockquote {
    margin: 0;
    padding: 0;
    border: 0
}

.quoteblock blockquote:before {
    content: "\201c";
    float: left;
    font-size: 2.75em;
    font-weight: bold;
    line-height: .6em;
    margin-left: -.6em;
    color: #7a2518;
    text-shadow: 0 1px 2px rgba(0, 0, 0, .1)
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0
}

.quoteblock .attribution {
    margin-top: .5em;
    margin-right: .5ex;
    text-align: right
}

.quoteblock .quoteblock {
    margin-left: 0;
    margin-right: 0;
    padding: .5em 0;
    border-left: 3px solid rgba(0, 0, 0, .6)
}

.quoteblock .quoteblock blockquote {
    padding: 0 0 0 .75em
}

.quoteblock .quoteblock blockquote:before {
    display: none
}

.verseblock {
    margin: 0 1em 1.25em 1em
}

.verseblock pre {
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    font-size: 1.15rem;
    color: rgba(0, 0, 0, .85);
    font-weight: 300;
    text-rendering: optimizeLegibility
}

.verseblock pre strong {
    font-weight: 400
}

.verseblock .attribution {
    margin-top: 1.25rem;
    margin-left: .5ex
}

.quoteblock .attribution, .verseblock .attribution {
    font-size: .9375em;
    line-height: 1.45;
    font-style: italic
}

.quoteblock .attribution br, .verseblock .attribution br {
    display: none
}

.quoteblock .attribution cite, .verseblock .attribution cite {
    display: block;
    letter-spacing: -.025em;
    color: rgba(0, 0, 0, .6)
}

.quoteblock.abstract {
    margin: 0 0 1.25em 0;
    display: block
}

.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p {
    text-align: left;
    word-spacing: 0
}

.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before {
    display: none
}

table.tableblock {
    max-width: 100%;
    border-collapse: separate
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
    margin-bottom: 0
}

table.tableblock, th.tableblock, td.tableblock {
    border: 0 solid #dedede
}

table.grid-all th.tableblock, table.grid-all td.tableblock {
    border-width: 0 1px 1px 0
}

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock {
    border-width: 1px 1px 0 0
}

table.grid-cols th.tableblock, table.grid-cols td.tableblock {
    border-width: 0 1px 0 0
}

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child {
    border-right-width: 0
}

table.grid-rows th.tableblock, table.grid-rows td.tableblock {
    border-width: 0 0 1px 0
}

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock {
    border-bottom-width: 0
}

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock {
    border-width: 1px 0 0 0
}

table.frame-all {
    border-width: 1px
}

table.frame-sides {
    border-width: 0 1px
}

table.frame-topbot {
    border-width: 1px 0
}

th.halign-left, td.halign-left {
    text-align: left
}

th.halign-right, td.halign-right {
    text-align: right
}

th.halign-center, td.halign-center {
    text-align: center
}

th.valign-top, td.valign-top {
    vertical-align: top
}

th.valign-bottom, td.valign-bottom {
    vertical-align: bottom
}

th.valign-middle, td.valign-middle {
    vertical-align: middle
}

table thead th, table tfoot th {
    font-weight: bold
}

tbody tr th {
    display: table-cell;
    line-height: 1.6;
    background: #f7f8f7
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
    color: rgba(0, 0, 0, .8);
    font-weight: bold
}

p.tableblock > code:only-child {
    background: none;
    padding: 0
}

p.tableblock {
    font-size: 1em
}

td > div.verse {
    white-space: pre
}

ol {
    margin-left: 1.75em
}

ul li ol {
    margin-left: 1.5em
}

dl dd {
    margin-left: 1.125em
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: .625em
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: .625em
}

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child {
    width: 1em;
    font-size: .85em
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    width: 1em;
    position: relative;
    top: 1px
}

ul.inline {
    margin: 0 auto .625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block
}

ul.inline > li > * {
    display: block
}

.unstyled dl dt {
    font-weight: 400;
    font-style: normal
}

ol.arabic {
    list-style-type: decimal
}

ol.decimal {
    list-style-type: decimal-leading-zero
}

ol.loweralpha {
    list-style-type: lower-alpha
}

ol.upperalpha {
    list-style-type: upper-alpha
}

ol.lowerroman {
    list-style-type: lower-roman
}

ol.upperroman {
    list-style-type: upper-roman
}

ol.lowergreek {
    list-style-type: lower-greek
}

.hdlist > table, .colist > table {
    border: 0;
    background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
    padding: 0 .625em
}

td.hdlist1 {
    font-weight: bold;
    padding-bottom: 1.25em
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -.5em
}

.colist > table tr > td:first-of-type {
    padding: 0 .75em;
    line-height: 1
}

.colist > table tr > td:last-of-type {
    padding: .25em 0
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px #fff;
    -webkit-box-shadow: 0 0 0 1px #ddd;
    box-shadow: 0 0 0 1px #ddd
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: .25em .625em 1.25em 0
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: .25em 0 1.25em .625em
}

.imageblock > .title {
    margin-bottom: 0
}

.imageblock.thumb, .imageblock.th {
    border-width: 6px
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 .125em
}

.image.left, .image.right {
    margin-top: .25em;
    margin-bottom: .25em;
    display: inline-block;
    line-height: 0
}

.image.left {
    margin-right: .625em
}

.image.right {
    margin-left: .625em
}

a.image {
    text-decoration: none;
    display: inline-block
}

a.image object {
    pointer-events: none
}

sup.footnote, sup.footnoteref {
    font-size: .875em;
    position: static;
    vertical-align: super
}

sup.footnote a, sup.footnoteref a {
    text-decoration: none
}

sup.footnote a:active, sup.footnoteref a:active {
    text-decoration: underline
}

#footnotes {
    padding-top: .75em;
    padding-bottom: .75em;
    margin-bottom: .625em
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0
}

#footnotes .footnote {
    padding: 0 .375em 0 .225em;
    line-height: 1.3334;
    font-size: .875em;
    margin-left: 1.2em;
    text-indent: -1.05em;
    margin-bottom: .2em
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0
}

#content #footnotes {
    margin-top: -.625em;
    margin-bottom: 0;
    padding: .75em 0
}

.gist .file-data > table {
    border: 0;
    background: #fff;
    width: 100%;
    margin-bottom: 0
}

.gist .file-data > table td.line-data {
    width: 99%
}

div.unbreakable {
    page-break-inside: avoid
}

.big {
    font-size: larger
}

.small {
    font-size: smaller
}

.underline {
    text-decoration: underline
}

.overline {
    text-decoration: overline
}

.line-through {
    text-decoration: line-through
}

.aqua {
    color: #00bfbf
}

.aqua-background {
    background-color: #00fafa
}

.black {
    color: #000
}

.black-background {
    background-color: #000
}

.blue {
    color: #0000bf
}

.blue-background {
    background-color: #0000fa
}

.fuchsia {
    color: #bf00bf
}

.fuchsia-background {
    background-color: #fa00fa
}

.gray {
    color: #606060
}

.gray-background {
    background-color: #7d7d7d
}

.green {
    color: #006000
}

.green-background {
    background-color: #007d00
}

.lime {
    color: #00bf00
}

.lime-background {
    background-color: #00fa00
}

.maroon {
    color: #600000
}

.maroon-background {
    background-color: #7d0000
}

.navy {
    color: #000060
}

.navy-background {
    background-color: #00007d
}

.olive {
    color: #606000
}

.olive-background {
    background-color: #7d7d00
}

.purple {
    color: #600060
}

.purple-background {
    background-color: #7d007d
}

.red {
    color: #bf0000
}

.red-background {
    background-color: #fa0000
}

.silver {
    color: #909090
}

.silver-background {
    background-color: #bcbcbc
}

.teal {
    color: #006060
}

.teal-background {
    background-color: #007d7d
}

.white {
    color: #bfbfbf
}

.white-background {
    background-color: #fafafa
}

.yellow {
    color: #bfbf00
}

.yellow-background {
    background-color: #fafa00
}

span.icon > .fa {
    cursor: default
}

.admonitionblock td.icon [class^="fa icon-"] {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
    cursor: default
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: #19407c
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    text-shadow: 1px 1px 2px rgba(155, 155, 0, .8);
    color: #111
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #bf6900
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #bf3400
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #bf0000
}

.conum[data-value] {
    display: inline-block;
    color: #fff !important;
    background-color: rgba(0, 0, 0, .8);
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    font-size: .75em;
    width: 1.67em;
    height: 1.67em;
    line-height: 1.67em;
    font-family: "Liberation Sans", Arial, Helvetica, sans-serif;
    font-style: normal;
    font-weight: bold
}

.conum[data-value] * {
    color: #fff !important
}

.conum[data-value] + b {
    display: none
}

.conum[data-value]:after {
    content: attr(data-value)
}

pre .conum[data-value] {
    position: relative;
    top: -.125em
}

b.conum * {
    color: inherit !important
}

.conum:not([data-value]):empty {
    display: none
}

dt, th.tableblock, td.content, div.footnote {
    text-rendering: optimizeLegibility
}

h1, h2, p, td.content, span.alt {
    letter-spacing: -.01em
}

p strong, td.content strong, div.footnote strong {
    letter-spacing: -.005em
}

p, blockquote, dt, td.content, span.alt {
    font-size: 1.0625rem
}

p {
    margin-bottom: 1.25rem
}

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock {
    font-size: 1em
}

.exampleblock > .content {
    background-color: #fffef7;
    border-color: #e0e0dc;
    -webkit-box-shadow: 0 1px 4px #e0e0dc;
    box-shadow: 0 1px 4px #e0e0dc
}

.print-only {
    display: none !important
}

@media print {
    @page {
        margin: 1.25cm .75cm
    }

    * {
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        text-shadow: none !important
    }

    a {
        color: inherit !important;
        text-decoration: underline !important
    }

    a.bare, a[href^="#"], a[href^="mailto:"] {
        text-decoration: none !important
    }

    a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after {
        content: "(" attr(href) ")";
        display: inline-block;
        font-size: .875em;
        padding-left: .25em
    }

    abbr[title]:after {
        content: " (" attr(title) ")"
    }

    pre, blockquote, tr, img, object, svg {
        page-break-inside: avoid
    }

    thead {
        display: table-header-group
    }

    svg {
        max-width: 100%
    }

    p, blockquote, dt, td.content {
        font-size: 1em;
        orphans: 3;
        widows: 3
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid
    }

    #toc, .sidebarblock, .exampleblock > .content {
        background: none !important
    }

    #toc {
        border-bottom: 1px solid #ddddd8 !important;
        padding-bottom: 0 !important
    }

    .sect1 {
        padding-bottom: 0 !important
    }

    .sect1 + .sect1 {
        border: 0 !important
    }

    #header > h1:first-child {
        margin-top: 1.25rem
    }

    body.book #header {
        text-align: center
    }

    body.book #header > h1:first-child {
        border: 0 !important;
        margin: 2.5em 0 1em 0
    }

    body.book #header .details {
        border: 0 !important;
        display: block;
        padding: 0 !important
    }

    body.book #header .details span:first-child {
        margin-left: 0 !important
    }

    body.book #header .details br {
        display: block
    }

    body.book #header .details br + span:before {
        content: none !important
    }

    body.book #toc {
        border: 0 !important;
        text-align: left !important;
        padding: 0 !important;
        margin: 0 !important
    }

    body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 {
        page-break-before: always
    }

    .listingblock code[data-lang]:before {
        display: block
    }

    #footer {
        background: none !important;
        padding: 0 .9375em
    }

    #footer-text {
        color: rgba(0, 0, 0, .6) !important;
        font-size: .9em
    }

    .hide-on-print {
        display: none !important
    }

    .print-only {
        display: block !important
    }

    .hide-for-print {
        display: none !important
    }

    .show-for-print {
        display: inherit !important
    }
}

</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>Customer Data Platform 1.0</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_terminology">1.1. Terminology</a></li>
<li><a href="#_normative_references">1.2. Normative References</a></li>
</ul>
</li>
<li><a href="#_use_cases">2. Use Cases</a>
<ul class="sectlevel2">
<li><a href="#_consent_management">2.1. Consent management</a></li>
<li><a href="#_privacy_management">2.2. Privacy management</a></li>
<li><a href="#_personalization">2.3. Personalization</a></li>
<li><a href="#_newsletters">2.4. Newsletters</a></li>
<li><a href="#_a_b_testing">2.5. A/B testing</a></li>
</ul>
</li>
<li><a href="#_domain_objects">3. Domain objects</a></li>
<li><a href="#_api">4. API</a>
<ul class="sectlevel2">
<li><a href="#_graphql_limitations_and_workarounds">4.1. GraphQL limitations and workarounds</a></li>
<li><a href="#_scalars">4.2. Scalars</a>
<ul class="sectlevel3">
<li><a href="#_json">4.2.1. JSON</a></li>
<li><a href="#_date">4.2.2. Date</a></li>
<li><a href="#_time">4.2.3. Time</a></li>
<li><a href="#_datetime">4.2.4. DateTime</a></li>
<li><a href="#_geopoint">4.2.5. GeoPoint</a></li>
</ul>
</li>
<li><a href="#_properties">4.3. Properties</a>
<ul class="sectlevel3">
<li><a href="#_cdp_propertyinterface">4.3.1. CDP_PropertyInterface</a></li>
<li><a href="#_cdp_propertyinput">4.3.2. CDP_PropertyInput</a></li>
<li><a href="#_cdp_booleanproperty">4.3.3. CDP_BooleanProperty</a></li>
<li><a href="#_cdp_booleanpropertyinput">4.3.4. CDP_BooleanPropertyInput</a></li>
<li><a href="#_cdp_dateproperty">4.3.5. CDP_DateProperty</a></li>
<li><a href="#_cdp_datepropertyinput">4.3.6. CDP_DatePropertyInput</a></li>
<li><a href="#_cdp_enumproperty">4.3.7. CDP_EnumProperty</a></li>
<li><a href="#_cdp_enumpropertyinput">4.3.8. CDP_EnumPropertyInput</a></li>
<li><a href="#_cdp_floatproperty">4.3.9. CDP_FloatProperty</a></li>
<li><a href="#_cdp_floatpropertyinput">4.3.10. CDP_FloatPropertyInput</a></li>
<li><a href="#_cdp_geopointproperty">4.3.11. CDP_GeoPointProperty</a></li>
<li><a href="#_cdp_geopointpropertyinput">4.3.12. CDP_GeoPointPropertyInput</a></li>
<li><a href="#_cdp_identifierproperty">4.3.13. CDP_IdentifierProperty</a></li>
<li><a href="#_cdp_identifierpropertyinput">4.3.14. CDP_IdentifierPropertyInput</a></li>
<li><a href="#_cdp_intproperty">4.3.15. CDP_IntProperty</a></li>
<li><a href="#_cdp_intpropertyinput">4.3.16. CDP_IntPropertyInput</a></li>
<li><a href="#_cdp_stringproperty">4.3.17. CDP_StringProperty</a></li>
<li><a href="#_cdp_stringpropertyinput">4.3.18. CDP_StringPropertyInput</a></li>
<li><a href="#_cdp_setproperty">4.3.19. CDP_SetProperty</a></li>
<li><a href="#_cdp_setpropertyinput">4.3.20. CDP_SetPropertyInput</a></li>
</ul>
</li>
<li><a href="#_filters">4.4. Filters</a>
<ul class="sectlevel3">
<li><a href="#_ordering">4.4.1. Ordering</a></li>
<li><a href="#_cdp_sortorder">4.4.2. CDP_SortOrder</a></li>
<li><a href="#_cdp_orderbyinput">4.4.3. CDP_OrderByInput</a></li>
<li><a href="#_cdp_datefilter">4.4.4. CDP_DateFilter</a></li>
<li><a href="#_cdp_datefilterinput">4.4.5. CDP_DateFilterInput</a></li>
<li><a href="#_cdp_geodistancefilterunit">4.4.6. CDP_GeoDistanceFilterUnit</a></li>
<li><a href="#_cdp_geodistancefilter">4.4.7. CDP_GeoDistanceFilter</a></li>
<li><a href="#_cdp_geodistancefilterinput">4.4.8. CDP_GeoDistanceFilterInput</a></li>
</ul>
</li>
<li><a href="#_clients">4.5. Clients</a>
<ul class="sectlevel3">
<li><a href="#_cdp_client">4.5.1. CDP_Client</a></li>
<li><a href="#_cdp_clientinput">4.5.2. CDP_ClientInput</a></li>
</ul>
</li>
<li><a href="#_sources">4.6. Sources</a>
<ul class="sectlevel3">
<li><a href="#_cdp_source">4.6.1. CDP_Source</a></li>
<li><a href="#_cdp_sourceinput">4.6.2. CDP_SourceInput</a></li>
<li><a href="#_cdp_query">4.6.3. CDP_Query</a></li>
<li><a href="#_cdp_mutation">4.6.4. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_objects">4.7. Objects</a>
<ul class="sectlevel3">
<li><a href="#_uris">4.7.1. URIs</a></li>
<li><a href="#_cdp_object">4.7.2. CDP_Object</a></li>
<li><a href="#_cdp_objectinput">4.7.3. CDP_ObjectInput</a></li>
</ul>
</li>
<li><a href="#_events">4.8. Events</a>
<ul class="sectlevel3">
<li><a href="#_cdp_eventinterface">4.8.1. CDP_EventInterface</a></li>
<li><a href="#_cdp_eventinput">4.8.2. CDP_EventInput</a></li>
<li><a href="#_cdp_query_2">4.8.3. CDP_Query</a></li>
<li><a href="#_cdp_mutation_2">4.8.4. CDP_Mutation</a></li>
<li><a href="#_cdp_subscriptions">4.8.5. CDP_Subscriptions</a></li>
<li><a href="#_event_processing_sample">4.8.6. Event processing sample</a></li>
</ul>
</li>
<li><a href="#_eventtypes">4.9. EventTypes</a>
<ul class="sectlevel3">
<li><a href="#_standard_event_types">4.9.1. Standard event types</a></li>
<li><a href="#_sample_event_types">4.9.2. Sample event types</a></li>
</ul>
</li>
<li><a href="#_eventfilters">4.10. EventFilters</a>
<ul class="sectlevel3">
<li><a href="#_cdp_eventfilter">4.10.1. CDP_EventFilter</a></li>
<li><a href="#_cdp_eventfilterinput">4.10.2. CDP_EventFilterInput</a></li>
</ul>
</li>
<li><a href="#_profiles">4.11. Profiles</a>
<ul class="sectlevel3">
<li><a href="#_profile_properties">4.11.1. Profile properties</a></li>
<li><a href="#_profile_merges">4.11.2. Profile merges</a></li>
<li><a href="#_deleting_profile_personal_data_aka_profile_anonymizing">4.11.3. Deleting profile personal data (aka profile anonymizing)</a></li>
<li><a href="#_cdp_profileid">4.11.4. CDP_ProfileID</a></li>
<li><a href="#_cdp_profileidinput">4.11.5. CDP_ProfileIDInput</a></li>
<li><a href="#_cdp_profileinterface">4.11.6. CDP_ProfileInterface</a></li>
<li><a href="#_cdp_profile">4.11.7. CDP_Profile</a></li>
<li><a href="#_cdp_profileupdateevent">4.11.8. CDP_ProfileUpdateEvent</a></li>
<li><a href="#_cdp_profileupdateeventinput">4.11.9. CDP_ProfileUpdateEventInput</a></li>
<li><a href="#_cdp_profileupdateeventfilter">4.11.10. CDP_ProfileUpdateEventFilter</a></li>
<li><a href="#_cdp_profileupdateeventfilterinput">4.11.11. CDP_ProfileUpdateEventFilterInput</a></li>
<li><a href="#_cdp_query_3">4.11.12. CDP_Query</a></li>
<li><a href="#_cdp_mutation_3">4.11.13. CDP_Mutation</a></li>
<li><a href="#_cdp_subscription">4.11.14. CDP_Subscription</a></li>
</ul>
</li>
<li><a href="#_profilefilters">4.12. ProfileFilters</a>
<ul class="sectlevel3">
<li><a href="#_cdp_profilefilter">4.12.1. CDP_ProfileFilter</a></li>
<li><a href="#_cdp_profilefilterinput">4.12.2. CDP_ProfileFilterInput</a></li>
<li><a href="#_cdp_profilepropertiesfilter">4.12.3. CDP_ProfilePropertiesFilter</a></li>
<li><a href="#_cdp_profilepropertiesfilterinput">4.12.4. CDP_ProfilePropertiesFilterInput</a></li>
<li><a href="#_cdp_profileeventsfilter">4.12.5. CDP_ProfileEventsFilter</a></li>
<li><a href="#_cdp_profileeventsfilterinput">4.12.6. CDP_ProfileEventsFilterInput</a></li>
</ul>
</li>
<li><a href="#_sessions">4.13. Sessions</a>
<ul class="sectlevel3">
<li><a href="#_cdp_sessionstate">4.13.1. CDP_SessionState</a></li>
<li><a href="#_cdp_sessionevent">4.13.2. CDP_SessionEvent</a></li>
<li><a href="#_cdp_sessioneventinput">4.13.3. CDP_SessionEventInput</a></li>
<li><a href="#_cdp_sessioneventfilter">4.13.4. CDP_SessionEventFilter</a></li>
<li><a href="#_cdp_sessioneventfilterinput">4.13.5. CDP_SessionEventFilterInput</a></li>
</ul>
</li>
<li><a href="#_consents">4.14. Consents</a>
<ul class="sectlevel3">
<li><a href="#_cdp_consentstatus">4.14.1. CDP_ConsentStatus</a></li>
<li><a href="#_cdp_consent">4.14.2. CDP_Consent</a></li>
<li><a href="#_cdp_consentupdateevent">4.14.3. CDP_ConsentUpdateEvent</a></li>
<li><a href="#_cdp_consentupdateeventinput">4.14.4. CDP_ConsentUpdateEventInput</a></li>
<li><a href="#_cdp_consentupdateeventfilter">4.14.5. CDP_ConsentUpdateEventFilter</a></li>
<li><a href="#_cdp_consentupdateeventfilterinput">4.14.6. CDP_ConsentUpdateEventFilterInput</a></li>
</ul>
</li>
<li><a href="#_views">4.15. Views</a>
<ul class="sectlevel3">
<li><a href="#_cdp_view">4.15.1. CDP_View</a></li>
<li><a href="#_cdp_viewinput">4.15.2. CDP_ViewInput</a></li>
<li><a href="#_cdp_query_4">4.15.3. CDP_Query</a></li>
<li><a href="#_cdp_mutation_4">4.15.4. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_topics">4.16. Topics</a>
<ul class="sectlevel3">
<li><a href="#_cdp_topic">4.16.1. CDP_Topic</a></li>
<li><a href="#_cdp_topicinput">4.16.2. CDP_TopicInput</a></li>
<li><a href="#_cdp_topicfilterinput">4.16.3. CDP_TopicFilterInput</a></li>
<li><a href="#_cdp_query_5">4.16.4. CDP_Query</a></li>
<li><a href="#_cdp_mutation_5">4.16.5. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_interests">4.17. Interests</a>
<ul class="sectlevel3">
<li><a href="#_cdp_interest">4.17.1. CDP_Interest</a></li>
<li><a href="#_cdp_interestinput">4.17.2. CDP_InterestInput</a></li>
<li><a href="#_cdp_interestfilter">4.17.3. CDP_InterestFilter</a></li>
<li><a href="#_cdp_interestfilterinput">4.17.4. CDP_InterestFilterInput</a></li>
</ul>
</li>
<li><a href="#_personas">4.18. Personas</a>
<ul class="sectlevel3">
<li><a href="#_cdp_persona">4.18.1. CDP_Persona</a></li>
<li><a href="#_cdp_personainput">4.18.2. CDP_PersonaInput</a></li>
<li><a href="#_cdp_personaconsentinput">4.18.3. CDP_PersonaConsentInput</a></li>
<li><a href="#_cdp_query_6">4.18.4. CDP_Query</a></li>
<li><a href="#_cdp_mutation_6">4.18.5. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_lists">4.19. Lists</a>
<ul class="sectlevel3">
<li><a href="#_cdp_list">4.19.1. CDP_List</a></li>
<li><a href="#_cdp_listinput">4.19.2. CDP_ListInput</a></li>
<li><a href="#_cdp_listsupdateevent">4.19.3. CDP_ListsUpdateEvent</a></li>
<li><a href="#_cdp_listsupdateeventinput">4.19.4. CDP_ListsUpdateEventInput</a></li>
<li><a href="#_cdp_listsupdateeventfilter">4.19.5. CDP_ListsUpdateEventFilter</a></li>
<li><a href="#_cdp_listsupdateeventfilterinput">4.19.6. CDP_ListsUpdateEventFilterInput</a></li>
<li><a href="#_cdp_listfilterinput">4.19.7. CDP_ListFilterInput</a></li>
<li><a href="#_cdp_query_7">4.19.8. CDP_Query</a></li>
<li><a href="#_cdp_mutation_7">4.19.9. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_segments">4.20. Segments</a>
<ul class="sectlevel3">
<li><a href="#_cdp_segment">4.20.1. CDP_Segment</a></li>
<li><a href="#_cdp_segmentinput">4.20.2. CDP_SegmentInput</a></li>
<li><a href="#_cdp_segmentfilterinput">4.20.3. CDP_SegmentFilterInput</a></li>
<li><a href="#_cdp_query_8">4.20.4. CDP_Query</a></li>
<li><a href="#_cdp_mutation_8">4.20.5. CDP_Mutation</a></li>
</ul>
</li>
<li><a href="#_profile_matching">4.21. Profile matching</a>
<ul class="sectlevel3">
<li><a href="#_cdp_namedfilterinput">4.21.1. CDP_NamedFilterInput</a></li>
<li><a href="#_cdp_filtermatch">4.21.2. CDP_FilterMatch</a></li>
</ul>
</li>
<li><a href="#_data_intelligence">4.22. Data Intelligence</a>
<ul class="sectlevel3">
<li><a href="#_cdp_scoredobject">4.22.1. CDP_ScoredObject</a></li>
<li><a href="#_cdp_algorithminput">4.22.2. CDP_AlgorithmInput</a></li>
</ul>
</li>
<li><a href="#_optimizations">4.23. Optimizations</a>
<ul class="sectlevel3">
<li><a href="#_cdp_optimizationresult">4.23.1. CDP_OptimizationResult</a></li>
<li><a href="#_cdp_optimizationinput">4.23.2. CDP_OptimizationInput</a></li>
<li><a href="#_cdp_eventoccurenceboostinput">4.23.3. CDP_EventOccurenceBoostInput</a></li>
</ul>
</li>
<li><a href="#_recommendations">4.24. Recommendations</a>
<ul class="sectlevel3">
<li><a href="#_cdp_recommendationresult">4.24.1. CDP_RecommendationResult</a></li>
<li><a href="#_cdp_recommendationinput">4.24.2. CDP_RecommendationInput</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_security_considerations">5. Security Considerations</a>
<ul class="sectlevel2">
<li><a href="#_attack_surface">5.1. Attack surface</a></li>
<li><a href="#_network_communication">5.2. Network communication</a></li>
<li><a href="#_client_tokens">5.3. Client tokens</a></li>
<li><a href="#_access_control">5.4. Access control</a></li>
<li><a href="#_authentication">5.5. Authentication</a></li>
<li><a href="#_audit_logs">5.6. Audit logs</a></li>
<li><a href="#_input_validation">5.7. Input validation</a></li>
</ul>
</li>
<li><a href="#_conformance">6. Conformance</a>
<ul class="sectlevel2">
<li><a href="#_conformance_targets">6.1. Conformance targets</a></li>
<li><a href="#_core_conformance">6.2. CORE conformance</a></li>
<li><a href="#_full_conformance">6.3. FULL conformance</a></li>
</ul>
</li>
<li><a href="#_appendix_a_acknowledgments">7. Appendix A. Acknowledgments</a></li>
<li><a href="#_appendix_b_revision_history">8. Appendix B. Revision History</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="images/OASISLogo-v2.0.jpg" alt="Oasis Open Logo">
</div>
</div>
<h2 id="_committee_specification_draft_01_public_review_draft_01" class="discrete">Committee Specification Draft 01 / Public Review Draft 01</h2>
<h3 id="_13_june_2019" class="discrete">13 June 2019</h3>
<h4 id="_this_version" class="discrete">This Version:</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p><a href="https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.adoc" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.adoc</a> (Authoritative)<br>
<a href="https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.html" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.html</a><br>
<a href="https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.pdf" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.pdf</a></p>
</td>
</tr>
</table>
</div>
<h4 id="_previous_version" class="discrete">Previous Version:</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>N/A</p>
</td>
</tr>
</table>
</div>
<h4 id="_latest_version" class="discrete">Latest Version:</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p><a href="https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.adoc" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.adoc</a> (Authoritative)<br>
<a href="https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.html" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.html</a><br>
<a href="https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.pdf" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.pdf</a></p>
</td>
</tr>
</table>
</div>
<h3 id="_technical_committee" class="discrete">Technical Committee:</h3>
<div class="paragraph">
<p>OASIS Context Server (CXS) TC</p>
</div>
<h4 id="_chairs" class="discrete">Chairs:</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Serge Huber (<a href="mailto:shuber@jahia.com">shuber@jahia.com</a>), Jahia Solutions Group SA, <a href="https://jahia.com" class="bare">https://jahia.com</a><br>
Thomas Lund Sigdestad (<a href="mailto:tsi@enonic.com">tsi@enonic.com</a>), Enonic, <a href="https://enonic.com" class="bare">https://enonic.com</a></p>
</td>
</tr>
</table>
</div>
<h4 id="_editors" class="discrete">Editors:</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Thomas Lund Sigdestad (<a href="mailto:tsi@enonic.com">tsi@enonic.com</a>), Enonic, <a href="https://enonic.com" class="bare">https://enonic.com</a>
Serge Huber (<a href="mailto:shuber@jahia.com">shuber@jahia.com</a>), Jahia Solutions Group SA, <a href="https://jahia.com" class="bare">https://jahia.com</a><br></p>
</td>
</tr>
</table>
</div>
<h3 id="_additional_artifacts" class="discrete">Additional artifacts:</h3>
<div class="paragraph">
<p>This prose specification is one component of a Work Product that also includes:</p>
</div>
<h4 id="_sample_server" class="discrete">Sample server</h4>
<div class="paragraph">
<p>Available from: <a href="https://github.com/oasis-tcs/cxs-cdp" class="bare">https://github.com/oasis-tcs/cxs-cdp</a></p>
</div>
<div class="listingblock">
<div class="title">To run server locally:</div>
<div class="content">
<pre>git clone https://github.com/oasis-tcs/cxs-cdp
git checkout tags/v1.0.0
cd cxs-cdp/server/
npm install
npm start</pre>
</div>
</div>
<h3 id="_related_work" class="discrete">Related work:</h3>
<div class="paragraph">
<p>This specification is related to:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">GraphQL</dt>
<dd>
<p>Query language and execution engine by <a href="https://graphql.org" class="bare">https://graphql.org</a> and the <a href="#GRAPHQL">GraphQL specification</a>.</p>
</dd>
<dt class="hdlist1">Apache Unomi</dt>
<dd>
<p>Open source and reference implementation project of the CDP specification: <a href="https://unomi.apache.org" class="bare">https://unomi.apache.org</a></p>
</dd>
</dl>
</div>
<h3 id="_abstract" class="discrete">Abstract:</h3>
<div class="paragraph">
<p>This specification aims to standardize exchange of customer data across systems and silos by defining a web-based API using GraphQL.
The GraphQL api is a self-documented and strongly typed interface.
It is designed to be dynamically extended, and allows extensive implementation specific customization.</p>
</div>
<h3 id="_status" class="discrete">Status:</h3>
<div class="paragraph">
<p>This document was last revised or approved by the OASIS Context Server (CXS) TC on the above date. The level of approval is also listed above. Check the "Latest version" location noted above for possible later revisions of this document. Any other numbered Versions and other technical work produced by the Technical Committee (TC) are listed at <a href="https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=cxs#technical" class="bare">https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=cxs#technical</a>.</p>
</div>
<div class="paragraph">
<p>TC members should send comments on this specification to the TC&#8217;s email list. Others should send comments to the TC&#8217;s public comment list, after subscribing to it by following the instructions at the "Send A Comment" button on the TC&#8217;s web page at <a href="https://www.oasis-open.org/committees/cxs/" class="bare">https://www.oasis-open.org/committees/cxs/</a>.</p>
</div>
<div class="paragraph">
<p>This specification is provided under the Non-Assertion Mode of the OASIS IPR Policy, the mode chosen when the Technical Committee was established. For information on whether any patents have been disclosed that may be essential to implementing this specification, and any offers of patent licensing terms, please refer to the Intellectual Property Rights section of the TC&#8217;s web page (<a href="https://www.oasis-open.org/committees/cxs/ipr.php" class="bare">https://www.oasis-open.org/committees/cxs/ipr.php</a>).</p>
</div>
<div class="paragraph">
<p><strong>Note that:</strong> Any machine-readable content (Computer Language Definitions) declared Normative for this Work Product is provided in separate plain text files. In the event of a discrepancy between any such plain text file and display content in the Work Product&#8217;s prose narrative document(s), the content in the separate plain text file prevails.</p>
</div>
<h3 id="_citation_format" class="discrete">Citation format:</h3>
<div class="paragraph">
<p>When referencing this specification the following citation format should be used:</p>
</div>
<div class="paragraph">
<p><strong>CDP-v1.0</strong></p>
</div>
<div class="paragraph">
<p><em>Customer Data Platform Version 1.0</em>. Edited by Thomas Lund Sigdestad &amp; Serge Huber. 13 June 2019.
OASIS Committee Specification Draft 01 / Public Review Draft 01.
<a href="https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.html" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/csprd01/cdp-v1.0-csprd01.html</a>.
Latest version: <a href="https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.html" class="bare">https://docs.oasis-open.org/cxs/cdp/v1.0/cdp-v1.0.html</a>.</p>
</div>
<hr>
<h2 id="_notices" class="discrete">Notices</h2>
<div class="paragraph">
<p>Copyright  OASIS Open 2019. All Rights Reserved.</p>
</div>
<div class="paragraph">
<p>All capitalized terms in the following text have the meanings assigned to them in the OASIS Intellectual Property Rights Policy (the "OASIS IPR Policy"). The full Policy may be found at the OASIS website.</p>
</div>
<div class="paragraph">
<p>This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published, and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this section are included on all such copies and derivative works. However, this document itself may not be modified in any way, including by removing the copyright notice or references to OASIS, except as needed for the purpose of developing any document or deliverable produced by an OASIS Technical Committee (in which case the rules applicable to copyrights, as set forth in the OASIS IPR Policy, must be followed) or as required to translate it into languages other than English.</p>
</div>
<div class="paragraph">
<p>The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns.</p>
</div>
<div class="paragraph">
<p>This document and the information contained herein is provided on an "AS IS" basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>
</div>
<div class="paragraph">
<p>OASIS requests that any OASIS Party or any other party that believes it has patent claims that would necessarily be infringed by implementations of this OASIS Committee Specification or OASIS Standard, to notify OASIS TC Administrator and provide an indication of its willingness to grant patent licenses to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this specification.</p>
</div>
<div class="paragraph">
<p>OASIS invites any party to contact the OASIS TC Administrator if it is aware of a claim of ownership of any patent claims that would necessarily be infringed by implementations of this specification by a patent holder that is not willing to provide a license to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this specification. OASIS may include such claims on its website, but disclaims any obligation to do so.</p>
</div>
<div class="paragraph">
<p>OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this document or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS' procedures with respect to rights in any document or deliverable produced by an OASIS Technical Committee can be found on the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this OASIS Committee Specification or OASIS Standard, can be obtained from the OASIS TC Administrator. OASIS makes no representation that any information or list of intellectual property rights will at any time be complete, or that any claims in such list are, in fact, Essential Claims.</p>
</div>
<div class="paragraph">
<p>The name "OASIS" is a trademark of OASIS, the owner and developer of this specification, and should be used only to refer to the organization and its official outputs. OASIS welcomes reference to, and implementation and use of, specifications, while reserving the right to enforce its marks against misleading uses. Please see <a href="https://www.oasis-open.org/policies-guidelines/trademark" class="bare">https://www.oasis-open.org/policies-guidelines/trademark</a> for above guidance.</p>
</div>
<hr>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Today, virtually all business is at some point digital, and the number of systems involved and the set of data collected is growing rapidly.
Each system creates new silos of customer data, spreading sensitive and personal data across both organizational and geographical borders.</p>
</div>
<div class="paragraph">
<p>Even digital savvy businesses struggle to control and utilize this information.
Businesses and users also rely on such data to be accessible in real-time, and at scale - for instance to deliver personalizations.
Additionally businesses now face severe legal charges if customer data is not treated according to regulatory requirements (ref GDPR).</p>
</div>
<div class="paragraph">
<p>The Customer Data Platform (CDP) specification aims to standardize exchange of customer data across systems and silos.
This enables centralization of customer data - consequently giving control of the data back to the business, and the customers.</p>
</div>
<div class="paragraph">
<p>The CDP standard is defined as a web-based API using GraphQL - providing a self-documented and strongly typed interface.</p>
</div>
<div class="paragraph">
<p>It has been an explicit goal of the CXS committee to allow extensive customization of CDP deployments, in order to fit the need of each different organization.
As such, the API dynamically evolves as you customize your deployment.</p>
</div>
<div class="sect2">
<h3 id="_terminology">1.1. Terminology</h3>
<div class="paragraph">
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC2119</a> and <a href="#RFC8174">RFC8174</a> when, and only when, they appear in all capitals, as shown here.</p>
</div>
</div>
<div class="sect2">
<h3 id="_normative_references">1.2. Normative References</h3>
<div id="GRAPHQL" class="dlist">
<dl>
<dt class="hdlist1">[GRAPHQL]</dt>
<dd>
<p>Lee Byron, "GraphQL specification", June 2018, <a href="https://graphql.github.io/graphql-spec/June2018/" class="bare">https://graphql.github.io/graphql-spec/June2018/</a></p>
</dd>
</dl>
</div>
<div id="RFC3986" class="dlist">
<dl>
<dt class="hdlist1">[RFC3986]</dt>
<dd>
<p>T. Berners-Lee, "Uniform Resource Identifier (URI): Generic Syntax", STD 66, RFC 8174, 10.17487/RFC3986, January 2005, <a href="http://www.rfc-editor.org/info/rfc3986" class="bare">http://www.rfc-editor.org/info/rfc3986</a></p>
</dd>
</dl>
</div>
<div id="RFC3339" class="dlist">
<dl>
<dt class="hdlist1">[RFC3339]</dt>
<dd>
<p>G. Klyne, "Date and Time on the Internet: Timestamps", RFC 3339, DOI:  10.17487/RFC3339 , July 2002, <a href="http://www.rfc-editor.org/info/rfc3339" class="bare">http://www.rfc-editor.org/info/rfc3339</a></p>
</dd>
</dl>
</div>
<div id="RFC2119" class="dlist">
<dl>
<dt class="hdlist1">[RFC2119]</dt>
<dd>
<p>Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, <a href="http://www.rfc-editor.org/info/rfc2119" class="bare">http://www.rfc-editor.org/info/rfc2119</a>.</p>
</dd>
</dl>
</div>
<div id="RFC8174" class="dlist">
<dl>
<dt class="hdlist1">[RFC8174]</dt>
<dd>
<p>Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017, <a href="http://www.rfc-editor.org/info/rfc8174" class="bare">http://www.rfc-editor.org/info/rfc8174</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_cases">2. Use Cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we present a selection of use cases that are relevant to the scope covered by the CDP specification.
They are by no means exhaustive, but illustrate what may be achieved through the use of the standard.</p>
</div>
<div class="sect2">
<h3 id="_consent_management">2.1. Consent management</h3>
<div class="paragraph">
<p>Privacy is a very important topic, especially when dealing with visitor data. For example, new legislation such as the
<a href="https://eugdpr.org">GDPR</a> imposes strict restrictions on how visitor data collection should be processed. It is therefore
very important that the CDP specification provide standardized ways of complying with more and more stringent
requirements.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdp-consent-usecase.svg" alt="Consent use case diagram">
</div>
</div>
<div class="paragraph">
<p>In the above use case we illustrate the support of consent management that is available in CDP-compliant systems. A
visitor profile may store the state of consents (granted or not) and these may be updated by using specialized event
types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_privacy_management">2.2. Privacy management</h3>
<div class="paragraph">
<p>A core requirement for any business handling personal data is transparency.
The ability to provide users with insight into what data are stored, and optionally manage their own data is essential.
A CDP not only aggregates personal data from various sources, but can also manage consents and profiles.
In specific cases, CDP may act as the source-of-truth across systems, and enable effective privacy management.</p>
</div>
<div class="paragraph">
<p>In this use case, a custom "privacy management interface" is deployed in front of the CDP.
The interface should be specifically designed for the business, and require authentication.</p>
</div>
<div class="paragraph">
<p>Authenticated users can then in a controlled fashion see, delete or update their personal data.
Examples or such might be events, properties or consents.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdp-privacyui-usecase.svg" alt="Privacy management UI use case diagram">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_personalization">2.3. Personalization</h3>
<div class="paragraph">
<p>A common use case is delivering better and more personalized experiences across applications and web sites.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdp-webpersonalization-usecase.svg" alt="Personalization use case diagram">
</div>
</div>
<div class="paragraph">
<p>As illustrated above, the browser can interact with both a (headless or regular) Content Management System (CMS) and a CDP-compliant server
to first retrieve the HTML needed to deliver the page content or bootstrap a Progressive Web Application (PWA). After this the next request to the CMS is a request
for personalized content that will be customized based on the profile retrieved from the CDP. The result is personalized
content for the current visitor being sent back to the browser.</p>
</div>
<div class="paragraph">
<p>This illustration is by no means the only way to implement personalization using a CDP but it serves as a simple
introduction to the possibilies such a system may offer. Even native mobile applications could be integrated using this
pattern.</p>
</div>
</div>
<div class="sect2">
<h3 id="_newsletters">2.4. Newsletters</h3>
<div class="paragraph">
<p>This use case is relevant to users interested in delivering newsletters to the proper audience. For example it might be
interesting to send a newsletter to promote a product to a group of profiles that has not purchased the product before,
but it would not be a good idea to send it to people that have already purchased it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdp-newsletter-usecase.svg" alt="Newsletter use case diagram">
</div>
</div>
<div class="paragraph">
<p>In the above illustration the newsletter server can query the CDP for a group of profile using either a query or a pre-
defined segment to retrieve the subset of profiles it is interested in. Once those profiles are retrieved they may be
used to update the newsletters management system lists with information coming from those exported profiles. And finally,
when the newsletter is ready to be distributed, the updated lists may be used to send the emails using an email delivery
server or service.</p>
</div>
<div class="paragraph">
<p>This use case could be expanded to use segmentation, campaigns and other Marketing Automation technologies that could
benefit from the standardized functionalities exposed by this specification.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_b_testing">2.5. A/B testing</h3>
<div class="paragraph">
<p>CDP systems may also be used to deliver A/B testing experiences. In this use case, the CDP server will use the visitor
profile information by updating it with the variants that the visitor has been exposed to, effectively "classifying" the
visitor into a sub-group.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cdp-abtesting-usecase.svg" alt="A/B testing use case diagram">
</div>
</div>
<div class="paragraph">
<p>In the above illustration, this use case is implemented by using a CMS to deliver the different variants of content that
are hidden by default. After that, the CDP is asked whether the profile is in variant A or B, which might be implemented
in different fashions but they will be remembered by the CDP for future displays.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_domain_objects">3. Domain objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below is a short introduction to the core domain objects of the specification:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/object-model.png" alt="Logical and simplified object model graph">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Blue objects are typically manually configured and managed, red objects are generated.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Events</dt>
<dd>
<p><a href="#_events">Events</a> represent the stream of "customer behaviour" events that help the CDP build <a href="#_profiles">Profiles</a></p>
</dd>
<dt class="hdlist1">Profiles</dt>
<dd>
<p>Representing the data of the subject, or "customer" interacting with your business <a href="#_objects">Objects</a></p>
</dd>
<dt class="hdlist1">Personas</dt>
<dd>
<p>Use <a href="#_personas">Personas</a> to simulate real <a href="#_profiles">Profiles</a> for testing and validation</p>
</dd>
<dt class="hdlist1">Objects</dt>
<dd>
<p>Are the physical or virtual items/persons a "customer" interacts with through events</p>
</dd>
<dt class="hdlist1">Lists</dt>
<dd>
<p>Manually or programatically managed <a href="#_lists">Lists</a> of profiles</p>
</dd>
<dt class="hdlist1">Segments</dt>
<dd>
<p><a href="#_segments">Segments</a> are lists of profiles defined by <a href="#_filters">Filters</a></p>
</dd>
<dt class="hdlist1">Consents</dt>
<dd>
<p><a href="#_consents">Consents</a> granted or denied by the subjects
Properties: Enable the definition of custom profile <a href="#_properties">Properties</a> within a CDP deployment</p>
</dd>
<dt class="hdlist1">Clients</dt>
<dd>
<p><a href="#_clients">Clients</a> represent any entity connecting to CDP, either for storing or retrieving data</p>
</dd>
<dt class="hdlist1">Views</dt>
<dd>
<p>Administrative <a href="#_views">Views</a> are used for grouping managed entities, i.e. lists and segments</p>
</dd>
<dt class="hdlist1">Interest</dt>
<dd>
<p>A profile&#8217;s weighted <a href="#_interests">Interests</a> for specific <a href="#_topics">Topics</a></p>
</dd>
<dt class="hdlist1">Topics</dt>
<dd>
<p>Represent "business areas" of the organisation deploying the CDP - i.e. a product or a location.</p>
</dd>
<dt class="hdlist1">Filters</dt>
<dd>
<p><a href="#_filters">Filters</a> are structured queries against other CDP domain objects</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api">4. API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Customer Data Platform (CDP) standard is built around a set of concepts, domain objects and services for interacting with them.
This is represented through a strongly typed API defined by GraphQL Types, Queries, Mutations and Subscriptions.</p>
</div>
<div class="paragraph">
<p>Each section in the API reference will usually start with a description of the domain objects and then include the normative GraphQL types, queries and mutations relevant to the domain objects.</p>
</div>
<div class="paragraph">
<p>This chapter describes the API in detail.</p>
</div>
<div class="paragraph">
<p>GraphQL requests are usually composed of two parts : <code>operations</code> and <code>variables</code>.</p>
</div>
<div class="paragraph">
<p>Throughout this document we will provide GraphQL request examples in the following form:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">operation</dt>
<dd>
<p>GraphQL query, mutation or subscription</p>
</dd>
<dt class="hdlist1">variables</dt>
<dd>
<p>JSON structure</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Example operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">query getExistingProfile($profileID : CDP_ProfileIDInput) {
  cdp {
    getProfile(createIfMissing: false, profileID: $profileID) {
      cdp_profileIDs {
        id
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above query retrieves all profileIDs for an existing profile (that&#8217;s why we set the createIfMissing
argument to false). We also define a variable called $profileID that must be passed in the "variables" section of the
GraphQL request. Here&#8217;s an example of the `variables part:</p>
</div>
<div class="listingblock">
<div class="title">Example variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "profileID": {
    "clientID": "web-tracker",
    "id": "0bb99ae7-0571-4b5f-8267-978731cb62c2"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As illustrated above, the variables may contain complex JSON structure that represent the values for the objects that
are passed as GraphQL arguments.</p>
</div>
<div class="sect2">
<h3 id="_graphql_limitations_and_workarounds">4.1. GraphQL limitations and workarounds</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">No support for inheritance in input types</dt>
<dd>
<p>as a workaround a wrapper type is used that contains fields for all the different possible sub-object types. The <a href="#_cdp_propertyinput">CDP_PropertyInput</a> type is an example of such a workaround</p>
</dd>
<dt class="hdlist1">Namespacing</dt>
<dd>
<p>all types are prefixed with the <code>CDP_</code> prefix to avoid conflicts with custom-defined types. Also for types that may mix CDP standard and user-defined fields, a <code>cdp_</code> prefix has been used.</p>
</dd>
<dt class="hdlist1">Dynamic API</dt>
<dd>
<p>as parts of the API are generated from user-defined properties or event types, removal of fields and types may happen dynamically. Implementors should advise users about this or create workarounds (such as <a href="https://www.apollographql.com/docs/graphql-tools/schema-directives">depreciation</a>).</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_scalars">4.2. Scalars</h3>
<div class="paragraph">
<p>GraphQL provides several basic value types that are used extensively in this specification, for instance Int and String.
However, the CDP specification is also handling other value types in a similar fashion.</p>
</div>
<div class="paragraph">
<p>The following scalars have been specifically added:</p>
</div>
<div class="sect3">
<h4 id="_json">4.2.1. JSON</h4>
<div class="paragraph">
<p>For values and arguments that cannot be defined structurally</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Scalar JSON</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_date">4.2.2. Date</h4>
<div class="paragraph">
<p>For consistent representation of dates. Based on <a href="#RFC-3339">RFC-3339</a>, for example 1996-12-19</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Scalar Date</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_time">4.2.3. Time</h4>
<div class="paragraph">
<p>For consistent representation of time. Based on <a href="#RFC-3339">RFC-3339</a>, for example 16:39:57-08:00</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Scalar Time</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datetime">4.2.4. DateTime</h4>
<div class="paragraph">
<p>For consistent representation of date and time. Based on <a href="#RFC-3339">RFC-3339</a>, for example 1996-12-19T16:39:57-08:00</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Scalar DateTime</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geopoint">4.2.5. GeoPoint</h4>
<div class="paragraph">
<p>Uses a string representation of lat,lon</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Scalar GeoPoint</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_properties">4.3. Properties</h3>
<div class="paragraph">
<p>To properly store and query data CDP needs a way to describe the data dynamically.</p>
</div>
<div class="paragraph">
<p>A Property represents data stored in a key-value format.
A single property can hold a single value, or an ordered array of values.
Each property has a specific valueType to limit what kind of values it may hold, such as <code>Identifier</code>, <code>String</code> and <code>Int</code>.</p>
</div>
<div class="paragraph">
<p>Below are some examples of properties:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>fullName(String) : "Jane Doe"<br>
birthDate(Date) : "2003-07-01"<br>
someInteger(Integer) : 1337<br>
gender(Enumeration) : FEMALE<br>
location(GeoPoint) : "lat,lon"<br>
arrayOfStrings([String]) : ["This", "is", "nice"]<br>
setOfProperties(Set) : {"prompt" : "hello", "response" : "yo"}<br>
arrayOfSet([Set]) : [{"name1": "value1", "name2" : "value2"}], [{"name1": "value1", "name2" : "value2"}]</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the case of the enumeration value type, a GraphQL enum type will be generated based on the registered possible values for the property.</p>
</div>
<div class="paragraph">
<p>The Set value type is special, as it enables nested properties and a tree-structure of properties.
I.e. from the example above: "setOfProperties.response" would hold the value "yo"</p>
</div>
<div class="paragraph">
<p>The arrayOfSet given as an example above is simply a Set property type with multiple values (see occurrences defined below).</p>
</div>
<div class="paragraph">
<p>A property consists of:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Property name</dt>
<dd>
<p>it is recommended but not mandatory to prefix the property name</p>
</dd>
<dt class="hdlist1">Value type</dt>
<dd>
<p>One of <code>Identifier</code>, <code>String</code>, <code>Int</code>, <code>Float</code>, <code>Date</code>, <code>Boolean</code>, <code>GeoPoint</code>, <code>Enumeration</code> and <code>Set</code></p>
</dd>
<dt class="hdlist1">Minimum occurrences</dt>
<dd>
<p>Minimum number of values a property may hold (array)</p>
</dd>
<dt class="hdlist1">Maximum occurrences</dt>
<dd>
<p>Maximum number of values per property</p>
</dd>
<dt class="hdlist1">Tags</dt>
<dd>
<p>A tag may be used to annotate the property with metadata information such as "personalData", "requiredReadAuthorization".</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Since the CDP api is defined using strongly typed GraphQL,
the API is dynamically updated when properties are added or changed.</p>
</div>
<div class="sect3">
<h4 id="_cdp_propertyinterface">4.3.1. CDP_PropertyInterface</h4>
<div class="paragraph">
<p>The property interface defines the common fields for the different value types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">interface CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p>must be in a format that&#8217;s acceptable as a GraphQL field name (/[<em>A-Za-z][_0-9A-Za-z]*/) , we highly RECOMMEND to prefix it to avoid conflicts, i.e acme_pageView, acme_click. "cdp</em>" is reserved.</p>
</dd>
<dt class="hdlist1">minOccurences</dt>
<dd>
<p>Default = 0. For minOccurrences &gt; 1 the property can hold multiple values in preserved order. minOccurences = 1 indicates the property is mandatory.</p>
</dd>
<dt class="hdlist1">maxOccurences</dt>
<dd>
<p>Default = 1. maxOccurences = 0 indicates no limit. maxOccurences must be higher than minOccurences.</p>
</dd>
<dt class="hdlist1">tags</dt>
<dd>
<p>System defined/generated tags. E.g: hidden, readOnly, personalData</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_propertyinput">4.3.2. CDP_PropertyInput</h4>
<div class="paragraph">
<p>A property type may have different values types, but due to a limitation of GraphQL Input types it is not possible to
represent this using type inheritance. As a workaround, an input type containing all possible value types is used
instead, and only one of these fields is allowed to have a value corresponding to the declared property value type. All
other value fields must be null. It is REQUIRED that implementations check for this and return an error if invalid
values are passed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_PropertyInput {
  identifier : CDP_IdentifierPropertyInput
  string : CDP_StringPropertyInput
  int : CDP_IntPropertyInput
  float : CDP_FloatPropertyInput
  date : CDP_DatePropertyInput
  boolean : CDP_BooleanPropertyInput
  geopoint : CDP_GeoPointPropertyInput
  enum : CDP_EnumPropertyInput
  set : CDP_SetPropertyInput
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_booleanproperty">4.3.3. CDP_BooleanProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_BooleanProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : Boolean
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_booleanpropertyinput">4.3.4. CDP_BooleanPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_BooleanPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : Boolean
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_dateproperty">4.3.5. CDP_DateProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_DateProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_datepropertyinput">4.3.6. CDP_DatePropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_DatePropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_enumproperty">4.3.7. CDP_EnumProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_EnumProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  values : [String]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_enumpropertyinput">4.3.8. CDP_EnumPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_EnumPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  values : [String]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_floatproperty">4.3.9. CDP_FloatProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_FloatProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  minValue : Float
  maxValue : Float
  defaultValue : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_floatpropertyinput">4.3.10. CDP_FloatPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_FloatPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  minValue : Float
  maxValue : Float
  defaultValue : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_geopointproperty">4.3.11. CDP_GeoPointProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_GeoPointProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_geopointpropertyinput">4.3.12. CDP_GeoPointPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_GeoPointPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_identifierproperty">4.3.13. CDP_IdentifierProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_IdentifierProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  regexp : String
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_identifierpropertyinput">4.3.14. CDP_IdentifierPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_IdentifierPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  regexp : String
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_intproperty">4.3.15. CDP_IntProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_IntProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  minValue : Int
  maxValue : Int
  defaultValue : Int
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_intpropertyinput">4.3.16. CDP_IntPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_IntPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  minValue : Int
  maxValue : Int
  defaultValue : Int
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_stringproperty">4.3.17. CDP_StringProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_StringProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  regexp : String
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_stringpropertyinput">4.3.18. CDP_StringPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_StringPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  regexp : String
  defaultValue : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_setproperty">4.3.19. CDP_SetProperty</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_SetProperty implements CDP_PropertyInterface {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  properties : [CDP_PropertyInterface]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_setpropertyinput">4.3.20. CDP_SetPropertyInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SetPropertyInput {
  name : ID!
  minOccurrences : Int
  maxOccurrences : Int
  tags : [String]
  properties : [CDP_PropertyInput]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_filters">4.4. Filters</h3>
<div class="paragraph">
<p>Filters are widely used in CDP, and enable querying profiles, events, and other CDP objects.
Filters are designed to be easy to use for administrators and marketeers in visual user interfaces, but also in terms of technical implementation.</p>
</div>
<div class="paragraph">
<p>Filters are essentially composed from basic property comparison expressions, and may be chained with the operators AND and OR, where AND is used by default.</p>
</div>
<div class="paragraph">
<p>For each operator available on a property&#8217;s value type a GraphQL field will be generated.</p>
</div>
<div class="paragraph">
<p>As we are expressing filters through GraphQL, filters will always be strongly typed.
I.e. if the property "firstName" of valueType string is available, the following filter options can be used:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>firstName_equals
firstName_startsWith
firstName_endsWith
firstName_contains
firstName_regexp</pre>
</div>
</div>
<div class="paragraph">
<p>Below are some basic filter examples:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{ "firstName_equals" : "Serge" }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>{ "birthDate_greaterThan" : "1970-01-01" }</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  "location_distance" : {
    "center" : { "longitude" : 59.91273, "latitude": 10.74609 },
    "unit" : "KILOMETERS",
    "distance" : 5
  }
}</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>{
  "or" : [
    { "firstName_equals" : "Serge" },
    { "birthDate_greaterThan" : "1970-01-01" }
  ]
}</pre>
</div>
</div>
<div class="paragraph">
<p>GraphQL filter fields will be generated the following way:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PROPERTYNAME + "_" + OPERATOR</pre>
</div>
</div>
<div class="paragraph">
<p>The following comparison operators are available:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Operator availability for property value types</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operators</th>
<th class="tableblock halign-left valign-top">Identifier</th>
<th class="tableblock halign-left valign-top">String</th>
<th class="tableblock halign-left valign-top">Int</th>
<th class="tableblock halign-left valign-top">Float</th>
<th class="tableblock halign-left valign-top">Date</th>
<th class="tableblock halign-left valign-top">Boolean</th>
<th class="tableblock halign-left valign-top">GeoPoint</th>
<th class="tableblock halign-left valign-top">Enumeration</th>
<th class="tableblock halign-left valign-top">Array</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">equals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startsWith</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x<a href="#o">[o]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endsWith</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x<a href="#o">[o]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contains</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x<a href="#o">[o]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">regexp</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x<a href="#o">[o]</a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lt</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lte</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gt</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gte</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">distance</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">x</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a id="o"></a>[o] OPTIONAL operator</p>
</div>
<div class="paragraph">
<p>The <code>Array</code> column is a special case. It can be an array of any GraphQL type. In this case only the <code>contains</code> operator
is defined in the specification, but implementations are free to offer more advanced operators for this type.</p>
</div>
<div class="sect3">
<h4 id="_ordering">4.4.1. Ordering</h4>
<div class="paragraph">
<p>OrderBy is used in combination with filters and lets you sort the result based on properties available for the returned objects.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>"orderBy": [{
  "property": "firstName",
  "order": "ASC"
  }
]</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sortorder">4.4.2. CDP_SortOrder</h4>
<div class="paragraph">
<p>Enumeration of allowed sorting operators</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">enum CDP_SortOrder {
  ASC,
  DESC,
  UNSPECIFIED
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_orderbyinput">4.4.3. CDP_OrderByInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_OrderByInput {
  fieldName : String
  order : CDP_SortOrder
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">fieldName</dt>
<dd>
<p>Specify the field to sort by, i.e. "endTime", "properties.location"</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_datefilter">4.4.4. CDP_DateFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_DateFilter {
  after : DateTime
  before : DateTime
  includeAfter : Boolean
  includeBefore : Boolean
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_datefilterinput">4.4.5. CDP_DateFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_DateFilterInput {
  after : DateTime
  before : DateTime
  includeAfter : Boolean
  includeBefore : Boolean
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_geodistancefilterunit">4.4.6. CDP_GeoDistanceFilterUnit</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">enum CDP_GeoDistanceFilterUnit {
  METERS,
  KILOMETERS,
  MILES
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_geodistancefilter">4.4.7. CDP_GeoDistanceFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_GeoDistanceFilter {
  center : GeoPoint
  unit : CDP_GeoDistanceFilterUnit
  distance : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_geodistancefilterinput">4.4.8. CDP_GeoDistanceFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_GeoDistanceFilterInput {
  center : GeoPoint
  unit : CDP_GeoDistanceFilterUnit
  distance : Float
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_clients">4.5. Clients</h3>
<div class="paragraph">
<p>The CDP GraphQL API should only be accessible for specific authorized clients.
Client represent any software that interacts directly with the Customer Data Platform.</p>
</div>
<div class="paragraph">
<p>Examples of clients are:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Cookie-based (Javascript or other) tracker for website(s)<br>
Integration with your CRM<br>
Integration with your Identity System</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each Client is responsible for uniquely identifying visitors, for instance through the use of a cookie on the website, a customer ID in the CRM or a user ID in the Identity system.
The Customer Data Platform requires a unique <a href="#CDP_profileID">profile ID</a> within every client.
For instance, if a client is used to track visitors across multiple websites, it should aim to re-use the same profile ID across all of them, for the same visitor.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The standard does not specify Queries or Mutations for creating or retrieving Clients in the CDP specification, as this is considered an implementation-specific feature.
For any CDP implementation, a Client MUST be defined for it to access the API.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_cdp_client">4.5.1. CDP_Client</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Client {
    id : ID!
    title : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_clientinput">4.5.2. CDP_ClientInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ClientInput {
    id : ID!
    title : String
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sources">4.6. Sources</h3>
<div class="paragraph">
<p>Sources are optional, but represent a way to identify the exact origin of events within a client.
For instance, a web tracking script may track visitors across many different sites, but treat each site as a source.
As such, sources are comparable to siteID&#8217;s in Google Analytics.</p>
</div>
<div class="paragraph">
<p>Sources may be reused across clients as desired.</p>
</div>
<div class="sect3">
<h4 id="_cdp_source">4.6.1. CDP_Source</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Source {
    id : ID!
    thirdParty : Boolean
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sourceinput">4.6.2. CDP_SourceInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SourceInput {
    id : ID!
    thirdParty : Boolean
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">id</dt>
<dd>
<p>The "system" source ID is reserved for internal use by the CDP.</p>
</dd>
<dt class="hdlist1">thirdParty</dt>
<dd>
<p>Optional, indicates that the source is a third party (useful for privacy regulations such as GDPR)</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query">4.6.3. CDP_Query</h4>
<div class="listingblock">
<div class="title">Source related queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getSources : [CDP_Source]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation">4.6.4. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">Source related mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateSource(source : CDP_SourceInput) : CDP_Source
  deleteSource(sourceID : ID!) : Boolean</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_objects">4.7. Objects</h3>
<div class="paragraph">
<p>Objects are representations of anything users interact with. For example: a web page, a product or another person.
Objects are used in <a href="#_events">Events</a> to specify what the <a href="#_profiles">Profiles</a> are interacting with. Objects are also used in <a href="#_optimizations">Optimizations</a>.</p>
</div>
<div class="paragraph">
<p>Objects may be part of one or more collections.
Collections are used to classify objects.
By placing objects into collections, optimizations may execute on a reduced data set (i.e. : recommending products).</p>
</div>
<div class="sect3">
<h4 id="_uris">4.7.1. URIs</h4>
<div class="paragraph">
<p>Objects are identified globally using URIs.
Internal CDP objects may be referenced using reserved schemes, that each have their associated syntax:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>cdp_profile:client/id<br>
cdp_segment:view/name<br>
cdp_persona:view/name<br>
cdp_topic:view/name<br>
cdp_list:view/name</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_object">4.7.2. CDP_Object</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Object {
    uri : ID! # uri format : scheme:path, https://tools.ietf.org/html/rfc3986
    scheme : String
    path : String
    topics : [CDP_Topic]
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">uri</dt>
<dd>
<p>Globally unique identifier using URI syntax according to <a href="#RFC3986">RFC3986</a>.</p>
</dd>
<dt class="hdlist1">topics</dt>
<dd>
<p>A way of classifying objects.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_objectinput">4.7.3. CDP_ObjectInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ObjectInput {
    uri : ID!
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events">4.8. Events</h3>
<div class="paragraph">
<p>Events are what drives the Customer Data Platform forward.
Events are collected from different Clients, such as a specific website, beacons, commerce systems or a CRM.</p>
</div>
<div class="paragraph">
<p>A single Client might still produce many different profiles for a "real person".
For instance - if a visitor uses different devices on a single web page, each device will produce a new profile, with a unique profileID.</p>
</div>
<div class="paragraph">
<p>The Customer Data Platform is essentially interested in "User behavioral events".
An event could be anything from someone clicking a link, to performing a transaction or consenting to use of his/hers information.
Events are streamed or delivered from authorized <a href="#_clients">Clients</a> to the Customer Data Platform.</p>
</div>
<div class="paragraph">
<p>As an example: Imagine an e-commerce site with a client that collect events from its visitors.
When a visitor browses the site with his laptop, the client assigns a cookie to his/her browser and starts feeding events to the CDP API.
As the visitor click on some product links, and maybe fills in a form that includes e-mail. CDP will gradually populate a profile, using the cookie value as an ID.
At a later point, the same visitor picks up a different device and returns to the site. As the client cannot know this is the same individual, a new cookie is generated, and a new profile starts to build up.</p>
</div>
<div class="paragraph">
<p>A single client may be used to track <a href="#_events">Events</a> from a number of different websites, where each website can be tagged with a source.
Sources provide a way to identify the exact origin of the events beyond the client.
As such, sources are comparable to siteID&#8217;s in Google Analytics.</p>
</div>
<div class="sect3">
<h4 id="_cdp_eventinterface">4.8.1. CDP_EventInterface</h4>
<div class="paragraph">
<p>Events make use of type inheritance.
To avoid name space conflicts, all standard event fields are prefixed with _.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">interface CDP_EventInterface {
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_eventinput">4.8.2. CDP_EventInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_EventInput {
  id: ID
  cdp_sourceID : String
  cdp_profileID: CDP_ProfileIDInput!
  cdp_objectID: ID!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [ID]
  cdp_profileUpdateEvent : CDP_ProfileUpdateEventInput
  cdp_consentUpdateEvent : CDP_ConsentUpdateEventInput
  cdp_listsUpdateEvent : CDP_ListsUpdateEventInput
  cdp_sessionEvent : CDP_SessionEventInput
  # Sample custom EventTypes below:
  # my_pageView : MY_PageViewEventInput
  # my_addedToCart : MY_addedToCartEventInput,
  # other_crmUpdate : OTHER_crmUpdateEventInput
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_2">4.8.3. CDP_Query</h4>
<div class="listingblock">
<div class="title">Event queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getEvent(id : String!) : CDP_EventInterface
  findEvents(filter : CDP_EventFilterInput, orderBy : [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_EventConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_2">4.8.4. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">Event mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  processEvents(events: [CDP_EventInput]!) : Int</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_subscriptions">4.8.5. CDP_Subscriptions</h4>
<div class="listingblock">
<div class="title">Event subscriptions</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  eventListener(filter: CDP_EventFilterInput) : CDP_EventInterface!</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_processing_sample">4.8.6. Event processing sample</h4>
<div class="listingblock">
<div class="title">Mutation</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">mutation profileUpdateExample($events: [CDP_EventInput]!) {
  cdp {
    processEvents(events: $events)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mutation variables</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">{"events": [
  {
    "_profileID": {
      "id": "1234567890",
      "clientID": "web-tracker"
    },
    "_objectID": "http://acme.org/aboutUs",
    "pageViewEvent": {
      "language" : "en"
    }
  }
]}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eventtypes">4.9. EventTypes</h3>
<div class="paragraph">
<p>Events must always be of a specific type.
CDP implementations must implement a set of standard EventTypes, any other EventTypes are implementation specific.</p>
</div>
<div class="paragraph">
<p>For flexibility reasons, implementers are encouraged to make EventTypes pluggable.
Implementation specific, or pluggable EventTypes SHOULD be registered with a prefix, to avoid naming conflicts.
All standard EventTypes will be prefixed with CDP.</p>
</div>
<div class="paragraph">
<p>Every EventType will need both a regular GraphQL type, and a GraphQL input.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
EventType fields MUST match the CDP propertyType format, and its underlying valueTypes
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When custom EventTypes are registered in a server, new corresponding fields will be added to the in the <a href="#_cdp_eventinput">CDP_EventInput</a>
type and the convention is that the field name is the same as the type name but starting with lowercase characters
instead of an uppercase one. For prefixed eventTypes, the entire prefix should be lowercased.</p>
</div>
<div class="paragraph">
<p>Custom output event types must also inherit from the CDP_EventInterface interface.</p>
</div>
<div class="paragraph">
<p>Below are examples of what custom EventTypes might look like, we used VENDOR as prefix, since it is recommended to avoid
conflicts with other types:</p>
</div>
<div class="listingblock">
<div class="title">Sample EventType for Page Views</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">input VENDOR_PageViewEventInput {
  pageID : String,
  language : String,
  pageUrl : String,
  referrer : String,
  userAgent : String
}

type VENDOR_PageViewEvent implements CDP_EventInterface {
  # The following fields come from the EventInterface
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  # The following fields are specific to this event type
  pageID : String,
  language : String,
  pageUrl : String,
  referrer : String,
  userAgent : String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="#_cdp_eventinput">CDP_EventInput</a> type will therefore modified to add the new event type-specific field.</p>
</div>
<div class="listingblock">
<div class="title">Sample EventType for Page Views</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">input CDP_EventInput {
  id: ID
  cdp_sourceID : String
  cdp_profileID: CDP_ProfileIDInput!
  cdp_objectID: ID!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [ID]
  cdp_profileUpdateEvent : CDP_ProfileUpdateEventInput
  cdp_consentUpdateEvent : CDP_ConsentUpdateEventInput
  cdp_listsUpdateEvent : CDP_ListsUpdateEventInput
  cdp_sessionEvent : CDP_SessionEventInput
  # Custom eventType - note the prefix lowercasing convention as well as the absence of the "Input" suffix.
  vendor_PageViewEvent : VENDOR_PageViewEventInput
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the event types are defined (in an implementation-specific manner), they can be sent using the <code>processEvents</code>
mutation field that uses the <a href="#_cdp_eventinput">CDP_EventInput</a> type and queried using the <code>findEvents</code> query field</p>
</div>
<div class="listingblock">
<div class="title">Sample EventType for CRM updates</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">input VENDOR_CrmLeadEventInput {
  leadStatus : String,
  leadID : String,
  firstName : String,
  lastName : String,
  email : String
}

type VENDOR_CrmLeadEvent implements CDP_EventInterface {
  # The following fields come from the EventInterface
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  # The following fields are specific to this event type
  leadStatus : String,
  leadID : String,
  firstName : String,
  lastName : String,
  email : String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="#_cdp_eventinput">CDP_EventInput</a> type will also have a new field called <code>vendor_CrmLeadEvent : VENDOR_CrmLeadEventInput</code> as in the
previous example.</p>
</div>
<div class="sect3">
<h4 id="_standard_event_types">4.9.1. Standard event types</h4>
<div class="paragraph">
<p>The CDP specification includes some standard event types. They are actually documented in their relevant section but we
list them here to provide an overview.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_cdp_profileupdateevent">Profile update</a></dt>
<dd>
<p>Update profile properties</p>
</dd>
<dt class="hdlist1"><a href="#_cdp_sessionevent">Session</a></dt>
<dd>
<p>Track session state changes</p>
</dd>
<dt class="hdlist1"><a href="#_cdp_consentupdateevent">Consent update</a></dt>
<dd>
<p>Update a profile consents</p>
</dd>
<dt class="hdlist1"><a href="#_cdp_listsupdateevent">List update</a></dt>
<dd>
<p>Opt in/out of list</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_sample_event_types">4.9.2. Sample event types</h4>
<div class="paragraph">
<p>Based on popular demand, future versions of the CDP standard may extend the set of standard eventTypes.
As an inspiration to implementers, below is a small list of non-standard eventTypes identified:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Click</dt>
<dd>
<p>Interaction</p>
</dd>
<dt class="hdlist1">View</dt>
<dd>
<p>View an object</p>
</dd>
<dt class="hdlist1">Transaction</dt>
<dd>
<p>Generic transaction</p>
</dd>
<dt class="hdlist1">Conversion</dt>
<dd>
<p>Purchase, download, signs up etc</p>
</dd>
<dt class="hdlist1">Like</dt>
<dd>
<p>Positive reaction to object</p>
</dd>
<dt class="hdlist1">Dislike</dt>
<dd>
<p>Negative reaction to an object</p>
</dd>
<dt class="hdlist1">Abuse</dt>
<dd>
<p>Reports spam or other negative use of an object</p>
</dd>
<dt class="hdlist1">Rate</dt>
<dd>
<p>Score in an object (in percent?)</p>
</dd>
<dt class="hdlist1">Download</dt>
<dd>
<p>After downloading a digital object</p>
</dd>
<dt class="hdlist1">Submit</dt>
<dd>
<p>After completing a form or providing input</p>
</dd>
<dt class="hdlist1">Contribute</dt>
<dd>
<p>Adding value to an object</p>
</dd>
<dt class="hdlist1">Login</dt>
<dd>
<p>Signing in</p>
</dd>
<dt class="hdlist1">Logout</dt>
<dd>
<p>Signing out</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_eventfilters">4.10. EventFilters</h3>
<div class="paragraph">
<p>EventFilters are a specific version of filters for querying events.</p>
</div>
<div class="paragraph">
<p>Example: Filter for identifying events of type <code>_profileUpdate</code> with a first name starting with <code>T</code> and a last name
ending with <code>d</code> within the last 30 days.</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">query findEvents($filter: CDP_EventFilterInput) {
  cdp {
    findEvents(filter: $filter) {
      edges {
        node {
          __typename
          cdp_timestamp
          cdp_object {
            uri
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "filter" : {
    "_timestamp_between" : {
      "after" : "NOW-30DAYS",
      "before" : "NOW",
      "includeBefore": false,
      "includeAfter": false
    },
      "_profileUpdateEvent" : {
      "firstName_startsWith" : "T",
      "lastName_endsWith" : "d"
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_eventfilter">4.10.1. CDP_EventFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_EventFilter {
  and : [CDP_EventFilter]
  or : [CDP_EventFilter]
  id_equals : String
  cdp_clientID_equals: String
  cdp_sourceID_equals : String
  cdp_profileID_equals : String
  cdp_objectID_equals : String
  cdp_location_distance : CDP_GeoDistanceFilter
  cdp_timestamp_equals : DateTime
  cdp_timestamp_lt : DateTime
  cdp_timestamp_lte : DateTime
  cdp_timestamp_gt : DateTime
  cdp_timestamp_gte : DateTime
  cdp_topics_equals : String
  cdp_profileUpdateEvent : CDP_ProfileUpdateEventFilter
  cdp_consentUpdateEvent : CDP_ConsentUpdateEventFilter
  cdp_listsUpdateEvent : CDP_ListsUpdateEventFilter
  cdp_sessionEvent : CDP_SessionEventFilter
  # generated event types will be listed here
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_eventfilterinput">4.10.2. CDP_EventFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_EventFilterInput {
  and : [CDP_EventFilterInput]
  or : [CDP_EventFilterInput]
  id_equals : String
  cdp_clientID_equals: String
  cdp_sourceID_equals : String
  cdp_profileID_equals : String
  cdp_objectID_equals : String
  cdp_location_distance : CDP_GeoDistanceFilterInput
  cdp_timestamp_equals : DateTime
  cdp_timestamp_lt : DateTime
  cdp_timestamp_lte : DateTime
  cdp_timestamp_gt : DateTime
  cdp_timestamp_gte : DateTime
  cdp_profileUpdateEvent : CDP_ProfileUpdateEventFilterInput
  cdp_consentUpdateEvent : CDP_ConsentUpdateEventFilterInput
  cdp_listsUpdateEvent : CDP_ListsUpdateEventFilterInput
  cdp_sessionEvent : CDP_SessionEventFilterInput
  # generated event types will be listed here
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profiles">4.11. Profiles</h3>
<div class="paragraph">
<p>Profiles are in many ways the holy grail of CDP.
The Customer Data Platform dynamically creates and build profiles from events that occur over time.</p>
</div>
<div class="paragraph">
<p>A Profile can be created from an anonymous visitor on a webpage, populated from an identity system, a CRM, or the combination of all of them.</p>
</div>
<div class="paragraph">
<p>Different <a href="#_clients">Clients</a> like a website tracking script, CRM or identity system can be configured to feed <a href="#_events">Events</a> to the Customer Data Platform.</p>
</div>
<div class="paragraph">
<p>The Customer Data Platform is responsible for building profiles based on the provided identifiers and the stream of events coming from each Client.</p>
</div>
<div class="sect3">
<h4 id="_profile_properties">4.11.1. Profile properties</h4>
<div class="paragraph">
<p>Each deployment of CDP will be unique in how data are collected, and what data is stored per profile.
Profile properties enable us to define custom properties required by an organization.</p>
</div>
<div class="paragraph">
<p>Administrators and developers may define and maintain a consistent data model for profiles across different <a href="#_clients">Clients</a>.
Any data to be recorded in a profile must be mapped to a corresponding profile property.</p>
</div>
<div class="paragraph">
<p>The specification does not define a set of standard profile properties. However, implementors SHOULD include the following standard properties :</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>fullName : string<br>
email : identifier<br>
phoneNumber : identifier<br>
birthDay : datetime</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Profiles are updated through events.
The history of external or internal profile modifications is accessible through the profile update events.
CDP implementations SHOULD also support <a href="#_cdp_subscription">subscriptions</a> on profile modifications so that external systems can retrieve the profile modifications in real-time.</p>
</div>
<div class="paragraph">
<p>Properties can be dynamically defined for profiles using the <code>createOrUpdateProfileProperties</code> and <code>deleteProfileProperties</code> mutations.
Once a property is associated with a profile, it will become available in the CDP_Profile and CDP_Persona types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is the responsability of clients accessing the GraphQL API to handle the lifecycle of properties properly, as
new properties may be defined at any time, or more importantly, properties may be also deleted, potentially breaking a
client&#8217;s use of the API.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As an example, let&#8217;s assume we have a starting CDP_Profile type that looks like this:</p>
</div>
<div class="listingblock">
<div class="title">Profile before</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Profile implements CDP_ProfileInterface {
  cdp_profileIDs : [CDP_ProfileID]
  cdp_events(filter : CDP_EventFilterInput, first : Int, last: Int, after : String, before: String) : CDP_EventConnection
  cdp_lastEvents(count : Int, profileID : CDP_ProfileIDInput) : CDP_EventConnection
  cdp_segments(views : [ID]) : [CDP_Segment]
  cdp_interests(views : [ID]) : [CDP_Interest]
  cdp_consents : [CDP_Consent]
  cdp_lists(views : [ID]) : [CDP_List]
  cdp_matches(namedFilters : [CDP_NamedFilterInput]) : [CDP_FilterMatch]
  cdp_optimize(parameters : [CDP_OptimizationInput]) : [CDP_OptimizationResult]
  cdp_recommend(parameters : [CDP_RecommendationInput]) : [CDP_RecommendationResult]
  # fields will be added here according to registered profile properties
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s use the mutation to create a new property.</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation addProperties($properties: [CDP_PropertyInput]) {
  cdp {
    createOrUpdateProfileProperties(properties: $properties)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "properties": [
    {
      "string": {
        "name": "firstName"
      }
    },
    {
      "set": {
        "name": "sample_Address",
        "properties": {
          "string": {"name": "streetName"},
          "string": {"name": "postalCode"}
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will resulting in the following modifications to the CDP_Profile type:</p>
</div>
<div class="listingblock">
<div class="title">Profile after</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Profile implements CDP_ProfileInterface {
  cdp_profileIDs : [CDP_ProfileID]
  cdp_events(filter : CDP_EventFilterInput, first : Int, last: Int, after : String, before: String) : CDP_EventConnection
  cdp_lastEvents(count : Int, profileID : CDP_ProfileIDInput) : CDP_EventConnection
  cdp_segments(views : [ID]) : [CDP_Segment]
  cdp_interests(views : [ID]) : [CDP_Interest]
  cdp_consents : [CDP_Consent]
  cdp_lists(views : [ID]) : [CDP_List]
  cdp_matches(namedFilters : [CDP_NamedFilterInput]) : [CDP_FilterMatch]
  cdp_optimize(parameters : [CDP_OptimizationInput]) : [CDP_OptimizationResult]
  cdp_recommend(parameters : [CDP_RecommendationInput]) : [CDP_RecommendationResult]
  # fields will be added here according to registered profile properties
  firstName : String
  sample_Address : Sample_Address
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following type is generated from the property definition. The name of the type starts with an uppercased character from the
property name.</p>
</div>
<div class="listingblock">
<div class="title">Generated type</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type Sample_Address {
  streetName : String,
  postalCode : String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will also generate new filter fields in the <a href="#_cdp_profilepropertiesfilterinput">CDP_ProfilePropertiesFilterInput</a> type:</p>
</div>
<div class="listingblock">
<div class="title">Updated filters</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfilePropertiesFilter {
  and : [CDP_ProfilePropertiesFilter]
  or : [CDP_ProfilePropertiesFilter]
  # generated profile properties filters will be listed below
  firstName_equals : String,
  firstName_contains : String
  sample_Address : Sample_AddressFilter
}

type Sample_AddressFilter {
  streetName_equals : String,
  streetName_contains : String,
  postalCode_equals : String,
  streetName_contains : String
}

input CDP_ProfilePropertiesFilterInput {
  and : [CDP_ProfilePropertiesFilterInput]
  or : CDP_ProfilePropertiesFilterInput
  # generated profile properties filters will be listed below
  firstName_equals : String,
  firstName_contains : String
  sample_Address : Sample_AddressFilterInput
}

input Sample_AddressFilterInput {
  streetName_equals : String,
  streetName_contains : String,
  postalCode_equals : String,
  streetName_contains : String
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the generation system also creates filter types (input and output) and adds the "Filter" and "FilterInput"
suffix to them. This will always happen and implementations MUST do this.</p>
</div>
<div class="paragraph">
<p>Also not illustrated here, the same generation system will also add fields to the following types :</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>CDP_ProfileUpdateEvent<br>
CDP_ProfileUpdateEventInput<br>
CDP_ProfileUpdateEventFilter<br>
CDP_ProfileUpdateEventFilterInput<br>
CDP_Persona<br>
CDP_PersonaInput</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The naming and generation conventions are exactly the same as for the profiles properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="_profile_merges">4.11.2. Profile merges</h4>
<div class="paragraph">
<p>Customer Data Platforms implementations MUST support profile merges.</p>
</div>
<div class="paragraph">
<p>As profiles evolve over time, the Customer Data Platform may discover that two profiles actually represent the same individual.
I.e. if the same e-mail address is registered in both two different profiles.</p>
</div>
<div class="paragraph">
<p>This may then result in a profile merge.
During a profile merge, the Customer Data Platform will link two (or more) separate profiles together.
In order to keep event history and avoid re-processing of data, the merge process must not affect the existing and unique profileIDs.
This is why profiles are defined to have multiple profileIDs.</p>
</div>
<div class="paragraph">
<p>Example: As such, when visitors on a website are tracked through a cookie (defining the profileID), the cookie will remain the same even if the profile is merged.</p>
</div>
<div class="paragraph">
<p>Profile merges may for instance be supported by using identifying profile properties (such as email and/or social security number).
The resulting merged profile MUST contain all the profile IDs of the merged profiles,
as well as the merged profile data.
The original profiles that were merged may be flagged or deleted, this is implementation specific.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deleting_profile_personal_data_aka_profile_anonymizing">4.11.3. Deleting profile personal data (aka profile anonymizing)</h4>
<div class="paragraph">
<p>The API provides a way to delete personal data associated with a profile. The effect of this operation is not specified
in details but it should respect existing privacy laws such as GDPR. For example, it could remove all properties flagged
as containing personal data and/or it could even process events in ways to anonymize data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileid">4.11.4. CDP_ProfileID</h4>
<div class="paragraph">
<p>Profiles are created from a client. As such, each profile has a composite key based on a unique ID within that client, and the client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfileID {
    client : CDP_Client!
    id : ID!
    uri : ID # "cdp_profile:source/id"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileidinput">4.11.5. CDP_ProfileIDInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfileIDInput {
    clientID : ID!
    id : ID!
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">id</dt>
<dd>
<p>ID must be unique within the client</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileinterface">4.11.6. CDP_ProfileInterface</h4>
<div class="paragraph">
<p>Common interface for <a href="#_profiles">Profiles</a> and <a href="#_personas">Personas</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">interface CDP_ProfileInterface {
  cdp_profileIDs : [CDP_ProfileID]
  cdp_segments(views : [ID]) : [CDP_Segment]
  cdp_interests(views : [ID]) : [CDP_Interest]
  cdp_consents : [CDP_Consent]
  cdp_lists(views : [ID]) : [CDP_List]
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">profileIDs</dt>
<dd>
<p>A single profile may consist of multiple id&#8217;s as profiles are being merged. The CDP may also generate a system profile ID and expose it here</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profile">4.11.7. CDP_Profile</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Profile implements CDP_ProfileInterface {
  cdp_profileIDs : [CDP_ProfileID]
  cdp_events(filter : CDP_EventFilterInput, first : Int, last: Int, after : String, before: String) : CDP_EventConnection
  cdp_lastEvents(count : Int, profileID : CDP_ProfileIDInput) : CDP_EventConnection
  cdp_segments(views : [ID]) : [CDP_Segment]
  cdp_interests(views : [ID]) : [CDP_Interest]
  cdp_consents : [CDP_Consent]
  cdp_lists(views : [ID]) : [CDP_List]
  cdp_matches(namedFilters : [CDP_NamedFilterInput]) : [CDP_FilterMatch]
  cdp_optimize(parameters : [CDP_OptimizationInput]) : [CDP_OptimizationResult]
  cdp_recommend(parameters : [CDP_RecommendationInput]) : [CDP_RecommendationResult]
  # fields will be added here according to registered profile properties
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileupdateevent">4.11.8. CDP_ProfileUpdateEvent</h4>
<div class="paragraph">
<p>Profiles are crated and updated through this event type.
This event is part of the standard and MUST be available for any implementation of the specification.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfileUpdateEvent implements CDP_EventInterface {
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  # fields will be added here according to registered profile properties. To remove a property value pass a null value
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileupdateeventinput">4.11.9. CDP_ProfileUpdateEventInput</h4>
<div class="paragraph">
<p>This is the input equivalent, notice because of missing input type inheritance in GraphQL,
it only contains the actual properties to update.</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation updateProfile($events: [CDP_EventInput]!) {
  cdp {
    processEvents(events: $events)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{"events": [
  {
    "_object" : "cdp_profile:crm/crm-profile-id",
    "_profileID": {
      "clientID": "crm",
      "id": "crm-profile-id"
    },
    "_profileUpdateEvent": {
      "firstName" : "Serge",
      "sample_Address" : {
        "streetName" : "My street name",
        "postalCode" : "12345"
      }
    }
  }
]}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileupdateeventfilter">4.11.10. CDP_ProfileUpdateEventFilter</h4>
<div class="listingblock">
<div class="title">Sample ProfileUpdateEventFilter</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfileUpdateEventInput {
  firstname : String
  dateofbirth : Date
  # more fields will be available based on defined profile properties
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileupdateeventfilterinput">4.11.11. CDP_ProfileUpdateEventFilterInput</h4>
<div class="listingblock">
<div class="title">Sample ProfileUpdateEventFilterInput</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfileUpdateEventInput {
  firstname : String
  dateofbirth : Date
  # more fields will be available based on defined profile properties
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_3">4.11.12. CDP_Query</h4>
<div class="listingblock">
<div class="title">Profile queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getProfile(profileID : CDP_ProfileIDInput, createIfMissing: Boolean) : CDP_Profile
  findProfiles(filter: CDP_ProfileFilterInput, orderBy: [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_ProfileConnection
  getProfileProperties : CDP_PropertyConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_3">4.11.13. CDP_Mutation</h4>
<div class="paragraph">
<p>The profile property mutation fields (createOrUpdateProfileProperties, deleteProfileProperties) are OPTIONAL
(see <a href="#_conformance">Conformance</a> section).</p>
</div>
<div class="listingblock">
<div class="title">Profile mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateProfileProperties(properties : [CDP_PropertyInput]) : Boolean
  deleteProfileProperties(propertyNames : [ID]!) : Boolean
  deleteProfile(profileID : CDP_ProfileIDInput) : CDP_Profile
  deleteAllPersonalData(profileID : CDP_ProfileIDInput) : Boolean</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_subscription">4.11.14. CDP_Subscription</h4>
<div class="listingblock">
<div class="title">Profile subscriptions</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">extend type CDP_Subscription {</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profilefilters">4.12. ProfileFilters</h3>
<div class="paragraph">
<p>Profile Filters are slightly more complex than <a href="#_eventfilters">EventFilters</a>.
As profileFilter are composed from both searching profile properties, and events related to the profile.</p>
</div>
<div class="paragraph">
<p>Here is an example of a GraphQL query (with variables) that will retrieve profiles that "have joined the list with the
id NEWSLETTER-LIST-ID since June 28th, 2018 at 5:25"</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-GraphQL" data-lang="GraphQL">query profileFilterExample(
  $profileFilter: CDP_ProfileFilterInput
  $orderBy: [CDP_OrderByInput]
) {
  cdp {
    findProfiles(filter: $profileFilter, orderBy: $orderBy, first : 10) {
      totalCount
      edges {
        node {
          cdp_profileIDs {
            client {
              id
            }
            id
          }
          cdp_segments {
            name
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "profileFilter": {
    "lists_contains" : [ "NEWSLETTER-LIST-ID" ],
    "properties": {},
    "events": {
      "minimalCount": 1,
      "eventFilter": {
        "_timestamp_gt": "2018-06-28T05:25:28+00:00",
        "_listsUpdateEvent": {
          "joinLists_contains" : ["NEWSLETTER-LIST-ID"]
        }
      }
    }
  },
  "orderBy": [
    {"fieldName": "properties.firstName", "order": "ASC"}
  ]
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profilefilter">4.12.1. CDP_ProfileFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfileFilter {
  profileIDs : [String]
  properties : CDP_ProfilePropertiesFilter
  segments_contains : [ID]
  consents_contains : [ID]
  lists_contains : [ID]
  interests : CDP_InterestFilter
  events : CDP_ProfileEventsFilter
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profilefilterinput">4.12.2. CDP_ProfileFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfileFilterInput {
  profileIDs_contains : [String]
  properties : CDP_ProfilePropertiesFilterInput
  segments_contains : [ID]
  consents_contains : [ID]
  lists_contains: [ID]
  interests : CDP_InterestFilterInput
  events : CDP_ProfileEventsFilterInput
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profilepropertiesfilter">4.12.3. CDP_ProfilePropertiesFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfilePropertiesFilter {
  and : [CDP_ProfilePropertiesFilter]
  or : [CDP_ProfilePropertiesFilter]
  # generated profile properties filters will be listed below
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profilepropertiesfilterinput">4.12.4. CDP_ProfilePropertiesFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfilePropertiesFilterInput {
  and : [CDP_ProfilePropertiesFilterInput]
  or : CDP_ProfilePropertiesFilterInput
  # generated profile properties filters will be listed below
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileeventsfilter">4.12.5. CDP_ProfileEventsFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ProfileEventsFilter {
  and : [CDP_ProfileEventsFilter]
  or : [CDP_ProfileEventsFilter]
  not : CDP_ProfileEventsFilter
  minimalCount : Int,
  maximalCount : Int,
  eventFilter : CDP_EventFilter
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_profileeventsfilterinput">4.12.6. CDP_ProfileEventsFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ProfileEventsFilterInput {
  and : [CDP_ProfileEventsFilterInput]
  or : [CDP_ProfileEventsFilterInput]
  not : CDP_ProfileEventsFilterInput
  minimalCount : Int,
  maximalCount : Int,
  eventFilter : CDP_EventFilterInput
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sessions">4.13. Sessions</h3>
<div class="paragraph">
<p>When individuals interact, clients may enrich the data associated with interaction by specifying sessions.
For instance, a session may start when a user loads a specific app, and end when he closes it.</p>
</div>
<div class="paragraph">
<p>The CDP_SessionEventInput is used to signify the beginning, pause, resume or end of a session.</p>
</div>
<div class="sect3">
<h4 id="_cdp_sessionstate">4.13.1. CDP_SessionState</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">enum CDP_SessionState {
  START,
  STOP,
  PAUSE,
  RESUME
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sessionevent">4.13.2. CDP_SessionEvent</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_SessionEvent implements CDP_EventInterface {
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  state : CDP_SessionState
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sessioneventinput">4.13.3. CDP_SessionEventInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SessionEventInput {
  state : CDP_SessionState
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of how to update a session&#8217;s state</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation updateSessions($events: [CDP_EventInput]!) {
  cdp {
    processEvents(events: $events)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "events": [
    {
      "_profileID": {
        "clientID": "crm",
        "id" : "crm-profile-id"
      },
      "_object": "cdp_profile:crm/crm-profile-id",
      "_sessionEvent": {
        "state": "PAUSE"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sessioneventfilter">4.13.4. CDP_SessionEventFilter</h4>
<div class="paragraph">
<p>This type is used in <a href="#_eventfilters">EventFilters</a> to filter session events</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_SessionEventFilter {
  state_equals : CDP_SessionState
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_sessioneventfilterinput">4.13.5. CDP_SessionEventFilterInput</h4>
<div class="paragraph">
<p>This type is used in <a href="#_eventfilters">EventFilters</a> to filter session events</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SessionEventFilterInput {
  state_equals : CDP_SessionState
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consents">4.14. Consents</h3>
<div class="paragraph">
<p>New legislation and stricter rules for use of personal data is already here (i.e. GDPR).
As such, consents are inherently more important to ensure you are using and storing data in compliance with policies.</p>
</div>
<div class="paragraph">
<p>Consents hold an identifier that uniquely identifies the consent across your systems.</p>
</div>
<div class="paragraph">
<p>Consents are given and revoked through events. This means that the CDP specification defines reserved property types for granting and revoking consents.</p>
</div>
<div class="listingblock">
<div class="title">Sample GRANTED consent</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">    {
      "_sourceID" : "example.com",
      "_profileID": {
        "clientID": "crm",
        "id" : "crm-profile-id"
      },
      "_object": "cdp_profile:crm/crm-profile-id",
      "_consentUpdateEvent": {
        "type": "send-to-salesforce",
        "status": "GRANTED",
        "lastUpdate": "NOW",
        # no revoke date means it will not expire or defaults to system or legal standard (GDPR)
      }
    }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample DENY consent</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">    {
      "_sourceID" : "example.com",
      "_profileID": {
        "clientID": "crm",
        "id" : "crm-profile-id"
      },
      "_object": "cdp_profile:crm/crm-profile-id",
      "_consentUpdateEvent": {
        "type": "newsletter-subscription-latestNews",
        "status": "DENY",
        "lastUpdate": "NOW",
        # no revoke date means it will not expire or defaults to system or legal standard (GDPR)
      }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consent Types may include:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>calling<br>
tracking<br>
message<br>
e-mail<br>
list membership<br>
access to camera<br>
access to friends / contacts<br>
access to medical records<br>
send personal data to third parties<br>
send anonymous data to third parties</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consent types are not defined in the specification, only the format of the type identifier
should use a URI convention. Some URIs could actually be URLs and point to real resource that would give the
semantics of the consent type. Types are not globally unique, a combination of view and types are globally unique
and context server implementations may use "global" or "system" views to share types.</p>
</div>
<div class="paragraph">
<p>It is not in the scope of this specification to define how authentication and consents interact but it is expect that
CDP implementations secure consent modifications. Also, tracking consents processing is not specified but it is highly
recommended that implementations provide some mechanism to ease the pain of implementing tracking management with minimal
end-user disturbance.</p>
</div>
<div class="sect3">
<h4 id="_cdp_consentstatus">4.14.1. CDP_ConsentStatus</h4>
<div class="paragraph">
<p>Uniquely specifies the status of any given Consent</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">enum CDP_ConsentStatus {
    GRANTED,
    DENIED,
    REVOKED
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_consent">4.14.2. CDP_Consent</h4>
<div class="paragraph">
<p>CDP_Consent represents a persisted Consent, always attached to a specific profile.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Consent {
  token : ID!
  source : CDP_Source
  client : CDP_Client
  type : String!
  status : CDP_ConsentStatus!
  lastUpdate : DateTime
  expiration : DateTime
  profile : CDP_ProfileInterface
  events : CDP_EventConnection
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Token</dt>
<dd>
<p>Similar to OAuth 2 authorization tokens to access the consent without the profile, also useful to delete the consent</p>
</dd>
<dt class="hdlist1">Type</dt>
<dd>
<p>Should be a Url or other meaningful identifier like <code>//mycompany.com/consents/newsletters/weekly</code>, <code>//crmcompany.com/consents/push-to-crm</code> or <code>//oasis_open.org/cxs/consents/send-to-third-parties</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_consentupdateevent">4.14.3. CDP_ConsentUpdateEvent</h4>
<div class="paragraph">
<p>Standard EventType to create or update Consents.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ConsentUpdateEvent implements CDP_EventInterface {
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  type : String!
  status : String,
  lastUpdate : DateTime,
  expiration : DateTime
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_consentupdateeventinput">4.14.4. CDP_ConsentUpdateEventInput</h4>
<div class="paragraph">
<p>Input type for ConsentUpdateEvent</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ConsentUpdateEventInput {
  type : String!
  status : String,
  lastUpdate : DateTime,
  expiration : DateTime
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of how to update a consent for a profile :</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation updateConsent($events: [CDP_EventInput]!) {
  cdp {
    processEvents(events: $events)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "events": [
    {
      "_profileID": {
        "clientID": "crm",
        "id" : "crm-profile-id"
      },
      "_object": "cdp_profile:crm/crm-profile-id",
      "_consentUpdateEvent": {
        "type": "newsletter",
        "status": "GRANTED",
        "lastUpdate": "now",
        "expiration": "now+365d"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_consentupdateeventfilter">4.14.5. CDP_ConsentUpdateEventFilter</h4>
<div class="paragraph">
<p>Filter for ConsentUpdateEvents</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ConsentUpdateEventFilter {
  type_equals : String,
  status_equals : String,
  lastUpdate_equals : DateTime,
  lastUpdate_lt : DateTime,
  lastUpdate_lte : DateTime,
  lastUpdate_gt : DateTime,
  lastUpdate_gte : DateTime,
  expiration_equals : DateTime,
  expiration_lt : DateTime,
  expiration_lte : DateTime,
  expiration_gt : DateTime,
  expiration_gte : DateTime
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_consentupdateeventfilterinput">4.14.6. CDP_ConsentUpdateEventFilterInput</h4>
<div class="paragraph">
<p>Input type for of ConsentUpdateEventsFilter</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ConsentUpdateEventFilterInput {
  type_equals : String,
  status_equals : String
  lastUpdate_equals : DateTime,
  lastUpdate_lt : DateTime,
  lastUpdate_lte : DateTime,
  lastUpdate_gt : DateTime,
  lastUpdate_gte : DateTime,
  expiration_equals : DateTime,
  expiration_lt : DateTime,
  expiration_lte : DateTime,
  expiration_gt : DateTime,
  expiration_gte : DateTime
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views">4.15. Views</h3>
<div class="paragraph">
<p>Views provide a way of grouping administrative objects in the Customer Data Platform.
<a href="#_profiles">Profiles</a>, <a href="#_events">Events</a> and <a href="#_consents">Consents</a> are all collected and stored globally,
but other items are typically handled by administrators or marketeers, and benefit from being grouped into different views to simplify handling.</p>
</div>
<div class="paragraph">
<p><a href="#_lists">Lists</a>, <a href="#_segments">Segments</a>, <a href="#_topics">Topics</a> and <a href="#_personas">Personas</a> are all tagged with Views.</p>
</div>
<div class="sect3">
<h4 id="_cdp_view">4.15.1. CDP_View</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_View {
  name: ID!
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_viewinput">4.15.2. CDP_ViewInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ViewInput {
  name: ID!
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_4">4.15.3. CDP_Query</h4>
<div class="listingblock">
<div class="title">View queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getViews : [CDP_View]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_4">4.15.4. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">View mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateView(view: CDP_ViewInput) : CDP_View
  deleteView(viewID : ID!) : Boolean</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_topics">4.16. Topics</h3>
<div class="paragraph">
<p>Topics represent the core entities of the business that is using the Customer Data Platform.
The Customer Data Platform aims to find correlation between profiles and the topics.
When such correlations are identified, it is called <a href="#_interests">Interests</a>.</p>
</div>
<div class="paragraph">
<p>CDP Administrators need to maintain a list of topics in order to obtain profile interests.
Profile interests is typically a core objective of Marketing activities, and targeting users with better content.</p>
</div>
<div class="paragraph">
<p>Example Topics for a car manufacturer might for instance be:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Model S<br>
Model 3<br>
Model X</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Topics are associated with <a href="#_objects">Objects</a> and <a href="#_profiles">Profiles</a> through <a href="#_events">Events</a>.
An example of how this might work in real life:
A website promoting a specific Product, for instance "Car type X", should also contain meta-data for the associated topic i.e. "model X".
The web tracking script can then feed this information back to the CDP, including both the object (web page in this case), and the specific topic.
This way, the CDP will be able to build a model of association.</p>
</div>
<div class="sect3">
<h4 id="_cdp_topic">4.16.1. CDP_Topic</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Topic {
  id : ID!
  view : CDP_View!
  name: String!
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_topicinput">4.16.2. CDP_TopicInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_TopicInput {
  id : ID
  view : ID!
  name: String!
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_topicfilterinput">4.16.3. CDP_TopicFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_TopicFilterInput {
  and : [CDP_TopicFilterInput]
  or : [CDP_TopicFilterInput]
  view_equals : ID
  id_equals : String
  name_equals : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_5">4.16.4. CDP_Query</h4>
<div class="listingblock">
<div class="title">Topic queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getTopic(topicID : ID) : CDP_Topic
  findTopics(filter: CDP_TopicFilterInput, orderBy: [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_TopicConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_5">4.16.5. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">Topic mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateTopic(topic : CDP_TopicInput) : CDP_Topic
  deleteTopic(topicID : String) : CDP_Topic</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_interests">4.17. Interests</h3>
<div class="paragraph">
<p>An important use-case for the Customer Data Platform is to determine a profile&#8217;s "Interests".
Whenever the Customer Data Platform registers an events that are associated with one or more <a href="#_topics">Topics</a>, this will affect the profile&#8217;s interest for the specific Topic.
A profile&#8217;s interest for a specific topic is measured between 0-1, where 1 is maximum. As such 0,5 would indicate a higher interest than 0,35.</p>
</div>
<div class="paragraph">
<p>The algorithm for how a Customer Data Platform scores and interest is implementation specific
- but implementations should also take care of automatically decreasing interest over time, unless new and relevant events occur.</p>
</div>
<div class="paragraph">
<p>Example interests for products from a car manufacturer might be:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Model S = 0.1<br>
Model 3 = 0.3<br>
Model X = 0.9<br>
Model Y = 1.0</p>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_cdp_interest">4.17.1. CDP_Interest</h4>
<div class="paragraph">
<p>Interests are calculated automatically based on implementation specific algorithm</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Interest {
  topic: CDP_Topic!
  score : Float
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">score</dt>
<dd>
<p>will be between 0.0 to 1.0</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_interestinput">4.17.2. CDP_InterestInput</h4>
<div class="paragraph">
<p>Specifying interest is only relevant for <a href="#_personas">Personas</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_InterestInput {
  topic : ID!
  score : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_interestfilter">4.17.3. CDP_InterestFilter</h4>
<div class="paragraph">
<p>Used to filter interests, mostly for administration purposes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_InterestFilter {
  and : [CDP_InterestFilter]
  or : [CDP_InterestFilter]
  topic_equals : ID
  score_equals : Float
  score_lt : Float
  score_lte : Float
  score_gt : Float
  score_gte : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_interestfilterinput">4.17.4. CDP_InterestFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_InterestFilterInput {
  and : [CDP_InterestFilterInput]
  or : [CDP_InterestFilterInput]
  topic_equals : ID
  score_equals : Float
  score_lt : Float
  score_lte : Float
  score_gt : Float
  score_gte : Float
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_personas">4.18. Personas</h3>
<div class="paragraph">
<p>A persona is a concept used to personify your audience.
This may for instance be used to test personalization and targeting of content in a 3rd party system.</p>
</div>
<div class="paragraph">
<p>In CDP, personas are essentially "dummy" profiles with the primary purpose of testing or emulating a real profile.
A common use-case would be testing personalized content in a CMS or a newsletter.</p>
</div>
<div class="paragraph">
<p>Personas and their fields can be explicitly created, where real profiles are built from a stream of events.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of creating a persona :</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation updatePersona($persona: CDP_PersonaInput) {
  cdp {
    createOrUpdatePersona(persona: $persona) {
      id
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "persona": {
    "_name": "mikeMarketing",
    "_view": "acme",
    "_segments": ["segment1", "segment2"],
    "_consents": [ {
      "type": "newsletter",
      "status": "GRANTED",
      "lastUpdate": "NOW",
      "expiration" : "NOW+30DAYS"
    } ],
    "_interests": [{"topic": "topic1", "score": 10}]
    "firstName" : "Mike",
    "lastName" : "Marketing"
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_persona">4.18.1. CDP_Persona</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Persona implements CDP_ProfileInterface {
  id : ID!
  cdp_name : String!
  cdp_view : CDP_View!
  cdp_profileIDs : [CDP_ProfileID]
  cdp_segments(views : [ID]) : [CDP_Segment]
  cdp_interests(views : [ID]) : [CDP_Interest]
  cdp_consents : [CDP_Consent]
  cdp_lists(views : [ID]) : [CDP_List]
  # fields will be added here according to registered profile properties
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_personainput">4.18.2. CDP_PersonaInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_PersonaInput {
  id : ID
  cdp_name : String!
  cdp_view : ID!
  cdp_profileIDs : [CDP_ProfileIDInput]
  cdp_segments : [ID]
  cdp_interests : [CDP_InterestInput]
  cdp_consents : [CDP_PersonaConsentInput]
  # fields will be added here according to registered profile properties
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_personaconsentinput">4.18.3. CDP_PersonaConsentInput</h4>
<div class="paragraph">
<p>Special type to set PersonaConsent without the use of events</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_PersonaConsentInput {
  type : String!
  status : String,
  lastUpdate : DateTime,
  expiration : DateTime
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_6">4.18.4. CDP_Query</h4>
<div class="listingblock">
<div class="title">Persona queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getPersona(personaID : String) : CDP_Persona
  findPersonas(filter: CDP_ProfileFilterInput, orderBy: [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_ProfileConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_6">4.18.5. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">Persona mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdatePersona(persona : CDP_PersonaInput) : CDP_Persona
  deletePersona(personaID : String) : CDP_Persona</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lists">4.19. Lists</h3>
<div class="paragraph">
<p>Lists are explicitly created and named in the Customer Data Platform. Profiles may then be added to a list, and later opt out if desired.
Whenever a profile opts out of a list, that information will also be stored. This prevents the profile from accidentally being added back to the list at a later point.</p>
</div>
<div class="paragraph">
<p>A common use-case for lists is creating a list for a campaign, and add the target profiles to the list as the campaign starts.</p>
</div>
<div class="sect3">
<h4 id="_cdp_list">4.19.1. CDP_List</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_List {
  id : ID!
  view: CDP_View!
  name : String!
  active(first: Int, after: String, last: Int, before: String) : CDP_ProfileConnection
  inactive(first: Int, after: String, last: Int, before: String) : CDP_ProfileConnection
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">id</dt>
<dd>
<p>Cannot change and is usually server generated</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listinput">4.19.2. CDP_ListInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ListInput {
  id : ID
  view: ID!
  name : String!
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listsupdateevent">4.19.3. CDP_ListsUpdateEvent</h4>
<div class="paragraph">
<p>Standard Event to update profile membership for specified lists</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ListsUpdateEvent implements CDP_EventInterface {
  id: ID!
  cdp_source : CDP_Source
  cdp_client : CDP_Client
  cdp_profileID: CDP_ProfileID!
  cdp_profile : CDP_Profile!
  cdp_object: CDP_Object!
  cdp_location: GeoPoint
  cdp_timestamp: DateTime
  cdp_topics : [CDP_Topic]
  joinLists : [CDP_List]
  leaveLists : [CDP_List]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listsupdateeventinput">4.19.4. CDP_ListsUpdateEventInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ListsUpdateEventInput {
  joinLists : [ID]
  leaveLists : [ID]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of how to update lists for a profile :</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation updateLists($events: [CDP_EventInput]!) {
  cdp {
    processEvents(events: $events)
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "events": [
    {
      "_profileID": {
        "clientID": "crm",
        "id" : "crm-profile-id"
      },
      "_object": "cdp_profile:crm/crm-profile-id",
      "_listsUpdateEvent": {
        "joinLists": ["list1", "list2"],
        "leaveLists": ["list3", "list4"]
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listsupdateeventfilter">4.19.5. CDP_ListsUpdateEventFilter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ListsUpdateEventFilter {
  joinLists_contains : [ID]
  leaveLists_contains : [ID]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listsupdateeventfilterinput">4.19.6. CDP_ListsUpdateEventFilterInput</h4>
<div class="paragraph">
<p>Used to filter list update events when querying events</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ListsUpdateEventFilterInput {
  joinLists_contains : [ID]
  leaveLists_contains : [ID]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_listfilterinput">4.19.7. CDP_ListFilterInput</h4>
<div class="paragraph">
<p>Used to filter lists in for management purposes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_ListFilterInput {
  and : [CDP_ListFilterInput]
  or : [CDP_ListFilterInput]
  view_equals : ID
  name_equals : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_7">4.19.8. CDP_Query</h4>
<div class="listingblock">
<div class="title">List queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getList(listID : ID) : CDP_List
  findLists(filter: CDP_ListFilterInput, orderBy: [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_ListConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_7">4.19.9. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">List mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateList(list : CDP_ListInput) : CDP_List
  addProfileToList(listID : ID, profileID : CDP_ProfileIDInput, active : Boolean) : CDP_List
  removeProfileFromList(listID : ID, profileID : CDP_ProfileIDInput) : CDP_List
  deleteList(listID : ID) : CDP_List</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_segments">4.20. Segments</h3>
<div class="paragraph">
<p>Segments are similar to lists in that profiles may be in the segment, or not.
However, where profiles are explicitly added to lists, they are dynamically resolved to segments based on the filter defined in the segment.</p>
</div>
<div class="paragraph">
<p>Administrative users define segments through <a href="#_filters">Filters</a>.</p>
</div>
<div class="paragraph">
<p>Example segments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rich europeans</dt>
<dd>
<p>Profiles in Europe with income above 1000k</p>
</dd>
<dt class="hdlist1">Frequent buyer</dt>
<dd>
<p>Profiles that have completed more than 5 transactions in the last 3 months</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Here&#8217;s an example operation to create a "male" segment (it assumes a "gender" profile property has been defined).</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">mutation createSegment($segment: CDP_SegmentInput) {
  cdp {
    createOrUpdateSegment(segment: $segment) {
      name
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "segment": {
    "name": "males",
    "view": "acme",
    "profiles": {
      "properties": {
        "gender_equals" : "male"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_segment">4.20.1. CDP_Segment</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_Segment {
  id : ID!
  view: CDP_View!
  name : String!
  profiles : CDP_ProfileFilter
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_segmentinput">4.20.2. CDP_SegmentInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SegmentInput {
  id : ID
  view : ID!
  name : String
  profiles : CDP_ProfileFilterInput
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_segmentfilterinput">4.20.3. CDP_SegmentFilterInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_SegmentFilterInput {
  and : [CDP_SegmentFilterInput]
  or : [CDP_SegmentFilterInput]
  view_equals : ID
  name_equals : String
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_query_8">4.20.4. CDP_Query</h4>
<div class="listingblock">
<div class="title">Segment queries</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  getSegment(segmentID : ID) : CDP_Segment
  findSegments(filter: CDP_SegmentFilterInput, orderBy: [CDP_OrderByInput], first: Int, after: String, last: Int, before: String) : CDP_SegmentConnection</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_mutation_8">4.20.5. CDP_Mutation</h4>
<div class="listingblock">
<div class="title">Segment mutations</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">  createOrUpdateSegment(segment : CDP_SegmentInput) : CDP_Segment
  deleteSegment(segmentID : String) : CDP_Segment</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profile_matching">4.21. Profile matching</h3>
<div class="paragraph">
<p>Clients may want to identify in real time if a given profile matches a specific segment, or filter.
This can effectively used in order to produce personalized responses or messages.</p>
</div>
<div class="sect3">
<h4 id="_cdp_namedfilterinput">4.21.1. CDP_NamedFilterInput</h4>
<div class="paragraph">
<p>Named filters are used to evaluate filters against a profile - useful for building personalized experiences</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_NamedFilterInput {
  name : String!
  filter: CDP_ProfileFilterInput
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_filtermatch">4.21.2. CDP_FilterMatch</h4>
<div class="paragraph">
<p>The result of a named filter match request</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_FilterMatch {
  name : String
  matched : Boolean
  executionTimeMillis : Int
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is an example of matching a profile with a filter in real-time:</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">query profileMatching(
  $profileID: CDP_ProfileIDInput
  $namedFilters: [CDP_NamedFilterInput]
) {
  cdp {
    getProfile(profileID: $profileID) {
      cdp_matches(namedFilters: namedFilters) {
        name
        matched
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "profileID": {
    "clientID": "crm",
    "id": "crm-profile-id"
  },
  "namedFilters": [
    {
      "name": "continentMatch",
      "filter": {
        "properties": {
          "continent_equals" : "Europe"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_intelligence">4.22. Data Intelligence</h3>
<div class="paragraph">
<p>The collection of structured information in a CDP enables potential beyond simply accessing these data.
By applying algorithms or machine learning techniques to the data,
a CDP can act as a real-time data source for advanced use cases in other applications.</p>
</div>
<div class="paragraph">
<p>The collection of structured information in a CDP enables potential beyond simply accessing these data.</p>
</div>
<div class="sect3">
<h4 id="_cdp_scoredobject">4.22.1. CDP_ScoredObject</h4>
<div class="paragraph">
<p>Objects with a specific scoring</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_ScoredObject {
    object : CDP_Object
    score : Float
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_algorithminput">4.22.2. CDP_AlgorithmInput</h4>
<div class="paragraph">
<p>Defining a specific algorithm to apply.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_AlgorithmInput {
    name : String!
    parameters : JSON
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>Implementation specific algorithms, examples may be <code>collaborative-filtering</code>, <code>clustering</code>, <code>deep</code>, <code>trending</code>, etc</p>
</dd>
<dt class="hdlist1">Parameters</dt>
<dd>
<p>JSON object supported by the specified algorithm. Algorithms must validate the object themselves. Parameters can be used to filter the results of the recommendation algorithm or any other custom processing that is supported by the implementation.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optimizations">4.23. Optimizations</h3>
<div class="paragraph">
<p>This part of the specification is OPTIONAL</p>
</div>
<div class="paragraph">
<p>A specific application of data intelligence is smart decision making, or optimizations.
In short, an optimization is done by passing a number of objects in, and letting the system rank them according to which is considered optimal.
For instance, which product is most relevant for a specific visitor.</p>
</div>
<div class="sect3">
<h4 id="_cdp_optimizationresult">4.23.1. CDP_OptimizationResult</h4>
<div class="paragraph">
<p>The result of an optimization, containing scored objects</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_OptimizationResult {
    name : String!
    scoredObjects : [CDP_ScoredObject]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_optimizationinput">4.23.2. CDP_OptimizationInput</h4>
<div class="paragraph">
<p>Definition of the optimization to perform</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_OptimizationInput {
    name : String!
    objects : [ID],
    eventOccurenceBoosts : [CDP_EventOccurenceBoostInput]
    strategy : String
    size : Int
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Strategy</dt>
<dd>
<p>Any strategy supported by the algorithm: Unspecified, random, scoring, best first match, worst match, a/b test</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_eventoccurenceboostinput">4.23.3. CDP_EventOccurenceBoostInput</h4>
<div class="paragraph">
<p>Used to boost positively/negatively the algorithm based on event type and time span: i.e. return a list of products the profile has viewed in the last year</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_EventOccurenceBoostInput {
    eventType : String
    boost : Int
    fromDate : DateTime
    toDate : DateTime
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Boost</dt>
<dd>
<p>Can also be a negative value</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example of an optimization of objects for a given profile :</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">query profileOptimizations(
  $profileID: CDP_ProfileIDInput
  $optimizationParameters: [CDP_OptimizationInput]
) {
  cdp {
    getProfile(profileID: $profileID) {
      cdp_optimize(parameters: $optimizationParameters) {
        name
        scoredObjects {
          object {
            uri
            scheme
            path
            topics {
              name
              view {
                name
              }
            }
          }
          score
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "profileID": {
    "clientID": "crm",
    "id": "crm-profile-id"
  },
  "optimizationParameters": [
    {
      "name": "carPromotion",
      "objects" : [
        "cars:modelS",
        "cars:modelX",
        "cars:model3"
      ],
      "eventOccurenceBoosts": {
        "eventType": "configuredCar",
        "boost": 3.0,
        "fromDate" : "NOW-1MONTH",
        "toDate" : "NOW"
      },
      "strategy": "scoring",
      "size" : 2
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recommendations">4.24. Recommendations</h3>
<div class="paragraph">
<p>This part of the specification is OPTIONAL</p>
</div>
<div class="paragraph">
<p>Unlike optimizations that act on a defined list of objects,
recommendations take an object as input, only to suggest other objects based on a specific algorithm.</p>
</div>
<div class="sect3">
<h4 id="_cdp_recommendationresult">4.24.1. CDP_RecommendationResult</h4>
<div class="paragraph">
<p>Provides a list of scored object</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">type CDP_RecommendationResult {
    name : String!
    scoredObjects : [CDP_ScoredObject]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdp_recommendationinput">4.24.2. CDP_RecommendationInput</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">input CDP_RecommendationInput {
    name : String!
    objectUri : ID
    topics : [ID]
    size : Int
    algorithm : CDP_AlgorithmInput
}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">objectUri</dt>
<dd>
<p>Specific object that is the originator of the recommendation</p>
</dd>
<dt class="hdlist1">topics</dt>
<dd>
<p>Objects have to be related to these specific topics</p>
</dd>
<dt class="hdlist1">size</dt>
<dd>
<p>Maximum number of results to retrieve</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example of how to get a recommendation for a profile :</p>
</div>
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlight"><code class="language-graphql" data-lang="graphql">query profileRecommendations(
  $profileID: CDP_ProfileIDInput
  $recommendationParameters: [CDP_RecommendationInput]
) {
  cdp {
    getProfile(profileID: $profileID) {
      cdp_recommend(parameters: $recommendationParameters) {
        name
        scoredObjects {
          object {
            uri
            scheme
            path
            topics {
              name
              view {
                name
              }
            }
          }
          score
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Variables</div>
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "profileID": {
    "clientID": "crm",
    "id": "crm-profile-id"
  },
  "recommendationParameters": [
    {
      "name": "similarBooks",
      "objectUri": "books:BOOK-ISBN-CODE",
      "topics": ["murderMysteries"],
      "size": 10,
      "algorithm": {"name": "similar"}
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">5. Security Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of CDP is to aggregate and store personal data.
Failure in securing the data may have dramatic consequences, both financially and in direct customer relationship for the involved parties.</p>
</div>
<div class="sect2">
<h3 id="_attack_surface">5.1. Attack surface</h3>
<div class="paragraph">
<p>Architecturally, CDP is designed to only be accessible through a single API. This limits the attack surface.
Deliberately, the standard does not specify how the API is secured, as this can be handled using traditional web security mechanisms, such as IP filtering and certificates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_network_communication">5.2. Network communication</h3>
<div class="paragraph">
<p>All communication going through a network, be it a local or global one, should be encrypted using latest recommended standards in the matter. In the case of the GraphQL API, it is highly recommended to use HTTPS connections to avoid man-in-the-middle attacks and eavesdropping. It is also not recommended that the GraphQL API be publicly and directly available, but only available to known and trusted clients.</p>
</div>
</div>
<div class="sect2">
<h3 id="_client_tokens">5.3. Client tokens</h3>
<div class="paragraph">
<p>Communicating with the API requires a valid <a href="#_clients">Client</a>.
Implementers are strongly encouraged to use additional tokens or similar for securing the client access further.</p>
</div>
</div>
<div class="sect2">
<h3 id="_access_control">5.4. Access control</h3>
<div class="paragraph">
<p>By default, clients get access to all data stored in the CDP.</p>
</div>
<div class="paragraph">
<p>Implementers are encouraged to implement different levels of access control beyond this.
For instance using roles or access control mechanisms, limiting clients to writing events,
or allowing access to management objects, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_authentication">5.5. Authentication</h3>
<div class="paragraph">
<p>The specification does not set any requirements for authentication
However, CDP specifies management objects that are intended to be created and handled by power-users and marketeers.</p>
</div>
<div class="paragraph">
<p>Implementers are encouraged to support a concepts for users in the implementation and API directly.</p>
</div>
<div class="paragraph">
<p>By combining the concept of client tokens above with users and/or autorization tokens (i.e using Oauth),
implementers may offer granular and controlled access to data through the CDP API.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is always recommended to proxy access to CDP through a gateway client.
Direct access from end user devices and other clients poses a higher risk of exposing sensitive data.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_audit_logs">5.6. Audit logs</h3>
<div class="paragraph">
<p>For interaction with management object in particular, it is recommended to implement audit logging.</p>
</div>
</div>
<div class="sect2">
<h3 id="_input_validation">5.7. Input validation</h3>
<div class="paragraph">
<p>Thanks to the usage of GraphQL, the API is strongly typed, which implies that input validation is performed on any API
request, minimizing the attack surface even more. For more information: <a href="https://facebook.github.io/graphql/June2018/#sec-Validation" class="bare">https://facebook.github.io/graphql/June2018/#sec-Validation</a></p>
</div>
<div class="paragraph">
<p>However, the input validation provided by GraphQL does not free implementations from performing measures against cross-site scripting and other script-injection attacks (eg: SQL injection).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conformance">6. Conformance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes requirements for an implementation to claim specification conformance.</p>
</div>
<div class="sect2">
<h3 id="_conformance_targets">6.1. Conformance targets</h3>
<div class="paragraph">
<p>There are two defined levels of conformance:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>CORE (minimum level conformance)<br>
FULL (complete implementation, including intelligence capabilities)</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_core_conformance">6.2. CORE conformance</h3>
<div class="paragraph">
<p>CORE conformance CDP server implementations:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>MUST implement the specifications of the <a href="#_api">API</a> section<br>
MAY implement any parts of the <a href="#_api">API</a> specification marked as OPTIONAL</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_full_conformance">6.3. FULL conformance</h3>
<div class="paragraph">
<p>CORE conformance CDP server implementations:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>MUST meet all requirements of the CORE conformance<br>
MUST additionally implement all OPTIONAL parts of the <a href="#_api">API</a> specification</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_a_acknowledgments">7. Appendix A. Acknowledgments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following individuals have participated in the creation of this specification and are gratefully acknowledged:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">

</td>
<td class="hdlist2">
<p>Jan Blessenohl, Progress Software<br>
Kaloyan Nikolov, Progress Software<br>
Chris Laprun, RedHat</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_b_revision_history">8. Appendix B. Revision History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Revision 	Date 	Editor 	Changes Made</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-06-17 17:12:06 CEST
</div>
</div>
</body>
</html>